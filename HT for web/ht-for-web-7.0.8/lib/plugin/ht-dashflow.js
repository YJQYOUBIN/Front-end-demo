!function($){"use strict";var X="ht",V=$[X],d=V.Default,F=Math,N=(F.PI,F.sin,F.cos,F.atan2,F.sqrt,F.max),U=F.floor,z=(F.round,F.ceil),P=V.Shape,o=(V.Edge,V.List),k=V.Style,G=V.graph,A=d.getInternal(),w=A.ui(),S=null,Y="prototype",p=$.clearInterval,y=$.setInterval,B=function(o){var e=o.data,C=this.dm();if(e&&"add"===o.kind){var R=C.$1c,a=e instanceof P?"shape.":"edge.";R&&e.s(a+"dash.flow")&&R.indexOf(e)<0&&R.push(e)}"clear"===o.kind&&(C.$1c=[])},j=function(m){var k=m.property,g=m.data,M=m.newValue,Q=this.dm().$1c,v=g instanceof P?"s:shape.dash.flow":"s:edge.dash.flow";if(Q&&k===v)if(M)Q.indexOf(g)<0&&Q.push(g);else for(var O=Q.length,C=0;O>C;C++)if(Q[C]===g){Q.splice(C,1);break}},e=G.GraphView[Y],K=w.EdgeUI[Y],T=w.ShapeUI[Y],v=T._80o,i=K._80o,c=V.DataModel[Y],s=c.prepareRemove,C=e.setDataModel;k["edge.dash.flow.step"]==S&&(k["edge.dash.flow.step"]=3),k["shape.dash.flow.step"]==S&&(k["shape.dash.flow.step"]=3),c.prepareRemove=function(b){s.call(this,b);var J=b._dataModel,j=J.$1c;if(j)for(var x=j.length,Z=0;x>Z;Z++)if(j[Z]===b){j.splice(Z,1);break}},e.setDataModel=function(s){var W=this,M=W._dataModel;if(M!==s){M&&(M.umm(B,W),M.umd(j,W),M.$1c=[]),s.mm(B,W),s.md(j,W);var w=s.$1c=[];s.each(function(i){var B=i instanceof P?"shape.":"edge.";i.s(B+"dash.flow")&&w.indexOf(i)<0&&w.push(i)}),C.call(W,s)}},e.setDashFlowInterval=function(H){var I=this,E=I.$2c;I.$2c=H,I.fp("dashFlowInterval",E,H),I.$3c!=S&&(p(I.$3c),delete I.$3c,I.enableDashFlow(H))},e.getDashFlowInterval=function(){return this.$2c},e.$4c=function(){var w,s,e,Q=this,I=Q.tx(),k=Q.ty(),t=Q._zoom,K=Q.getWidth(),m=Q.getHeight(),X={x:-I/t,y:-k/t,width:K/t,height:m/t},u=Q.dm().$1c,y=Q._56I,i=new o;if(u.forEach(function(g){y[g.getId()]&&(w=Q.getDataUI(g),w&&(e=w._79o(),e&&i.add(e)))}),0!==i.size()&&(i.each(function(O){d.intersectsRect(X,O)&&(s=d.unionRect(s,O))}),s&&(s&&(d.grow(s,N(1,1/t)),s.x=U(s.x*t)/t,s.y=U(s.y*t)/t,s.width=z(s.width*t)/t,s.height=z(s.height*t)/t,s=d.intersection(X,s)),s))){var l=Q._canvas.getContext("2d");l.save(),l.lineCap=d.lineCap,l.lineJoin=d.lineJoin;var T=d.devicePixelRatio,$=s.x,F=s.y,B=s.width,V=s.height;$=Math.floor(($*t+I)*T),F=Math.floor((F*t+k)*T),B=Math.ceil(B*t*T)+1,V=Math.ceil(V*t*T)+1,s.x=($/T-I)/t,s.y=(F/T-k)/t,s.width=B/T/t,s.height=V/T/t,l.beginPath(),l.rect($,F,B,V),l.clip(),l.clearRect($,F,B,V),A.translateAndScale(l,I,k,t),Q.$5c(l,s),l.restore()}},e.$5c=function(i,K){var P,X,k=this;k._93db(i),k.each(function(l){k._56I[l._id]&&(P=k.getDataUI(l),P&&(X=P._79o(),(!K||d.intersectsRect(K,X))&&(P.$7c=!0,P._42(i),delete P.$7c)))}),k._92db(i)},e.enableDashFlow=function(Y){var r=this;r.$3c==S&&(r.$3c=y(function(){r.$4c()},Y||r.$2c||50))},e.disableDashFlow=function(){var e=this;p(e.$3c),delete e.$3c};var b=function(){var E=this,c=E._data,O=c instanceof P?"shape.":"edge.",T=c.s(O+"dash.pattern"),H=c.s(O+"dash.flow.reverse");if(T&&c.s(O+"dash")&&c.s(O+"dash.flow")&&E.$7c){var b=E.s(O+"dash.offset")||0,w=c.s(O+"dash.flow.step"),X=c.getStyleMap(),l=0;T.forEach(function(U){l+=U}),H&&(w=-w),b-=w,b%=l,X||(c._styleMap=X={}),X[O+"dash.offset"]=b}};K._80o=function(c){i.call(this,c),b.call(this)},T._80o=function(Q){v.call(this,Q),b.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);