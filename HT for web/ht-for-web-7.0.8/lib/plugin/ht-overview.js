!function(T,W){"use strict";var n="ht",E=n+".graph.",Q=T[n],J=Q.graph,u=Q.Default,O=Q.Color,B=null,R="px",o=u.getInternal(),r=o.getPinchDist,b=u.preventDefault,L=u.getTouchCount,i=u.startDragging;o.addMethod(u,{overviewBackground:O.widgetBackground,overviewMaskBackground:O.transparent,overviewContentBorderColor:O.widgetBorder,overviewContentBackground:O.background},!0),J.Overview=function(x){var V=this,p=V._view=o.createView(1,V);V._canvas=o.createCanvas(p),p.style.background=u.overviewBackground,p.appendChild(V._mask=o.createDiv()),V.setGraphView(x),V.addListeners()},u.def(E+"Overview",W,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:u.overviewMaskBackground,_contentBorderColor:u.overviewContentBorderColor,_contentBackground:u.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(b){var B=this;if(B.gv!==b){var e=B.gv;B.gv=b,e&&(e.removeViewListener(B.handleGraphViewChanged,B),e.ump(B.handleGraphViewPropertyChanged,B)),b&&(b.addViewListener(B.handleGraphViewChanged,B),b.mp(B.handleGraphViewPropertyChanged,B)),B.fp("graphView",e,b),B.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(c){this._autoUpdate&&"validate"===c.kind&&this.redraw()},handleGraphViewPropertyChanged:function(J){("canvasBackground"===J.property||this.getFixToRect()&&("zoom"===J.property||"translateX"===J.property||"translateY"===J.property))&&this.redraw()},redraw:function(){var b=this;b._redraw||(b._redraw=1,b.iv(50))},validateImpl:function(){var q=this,d=q.gv,M=q._canvas,s=q.getWidth(),H=q.getHeight(),O=q._redraw;if(d){var W=q._mask,v=W.style,C=d.getViewRect(),r=this.getFixToRect(),T=r?"boolean"==typeof r?d.getContentRect():r:d.getScrollRect(),f=T.x,y=T.y,j=T.width,w=T.height,U=q._rate=Math.max(j/s,w/H),F=q._x=(s-j/U)/2,E=q._y=(H-w/U)/2;if(0!==C.width&&0!==C.height||q.hasRetry||(u.callLater(q.iv,q,B),q.hasRetry=!0),(s!==M.clientWidth||H!==M.clientHeight)&&(o.setCanvas(M,s,H),O=1),o.isSameRect(T,q._scrollRect)||(q._scrollRect=T,O=1),O){var Y=o.initContext(M),z=d.getDataModel(),X=z.getBackground()||q._contentBackground,D=q._contentBorderColor,G=u.devicePixelRatio;Y.clearRect(0,0,s*G,H*G);var x=z.getBackground()&&z.a("width")>0&&z.a("height")>0;X&&!x&&o.fillRect(Y,F*G,E*G,j/U*G,w/U*G,X),o.translateAndScale(Y,-f/U+F,-y/U+E,1/U),d._42(Y),Y.restore(),D&&o.drawBorder(Y,D,F*G,E*G,j/U*G,w/U*G)}v.background=q._maskBackground,v.left=F+(C.x-f)/U+R,v.top=E+(C.y-y)/U+R,v.width=C.width/U+R,v.height=C.height/U+R,q._redraw=null}else if(O){var Y=o.initContext(M);Y.clearRect(0,0,s,H),Y.restore(),q._redraw=null}},center:function(U){var Y=this,x=Y.gv;if(x){var j=x._zoom,P=x._29I,S=Y._rate,V=Y._scrollRect,z=u.getLogicalPoint(U,Y._canvas),e=V.x+(z.x-Y._x)*S,A=V.y+(z.y-Y._y)*S;x.setTranslate((P.width/2-e)*j,(P.height/2-A)*j)}},handle_mousedown:function(q){this.handle_touchstart(q)},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},handle_mousewheel:function(E){this.handleScroll(E,E.wheelDelta)},handle_DOMMouseScroll:function(_){2===_.axis&&this.handleScroll(_,-_.detail)},handleScroll:function(u,w){if(b(u),this.gv){var y=this.gv;w>0?y.scrollZoomIn():0>w&&y.scrollZoomOut()}},handle_touchstart:function(O){if(b(O),this.gv&&u.isLeftButton(O)){var w=this,s=w.gv,h=L(O);1===h?u.isDoubleClick(O)&&s.isResettable()?s.reset():(w.center(O),i(w,O)):2===h&&(w._dist=r(O),i(w,O))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(m){if(this.gv){var K=this,v=K._dist,A=L(m);1===A?K.center(m):2===A&&v!=B&&K.gv.handlePinch(B,r(m),v)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);