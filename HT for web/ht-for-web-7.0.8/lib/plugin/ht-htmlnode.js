!function(V){"use strict";var w="ht",X=V[w],i=function(){return document},Z=function(){return i().body},S=function(W,o,z){W.style.setProperty(o,z,null)},M=function(G){return i().createElement(G)},d=function(){return M("div")},D=function(){var v=M("canvas");return v},a=function(R,U){S(R,"-webkit-transform",U),S(R,"-ms-transform",U),S(R,"transform",U)},v=function(W,X){S(W,"-webkit-transform-origin",X),S(W,"-ms-transform-origin",X),S(W,"transform-origin",X)},k=function(H,v){H.appendChild(v)},K=function(o,G){o.removeChild(G)},s=V.parseInt,E=X.Default,p=E.getInternal(),W=p.addEventListener,m=(p.removeEventListener,Math.PI),t="white-space",y="visibility",r="left",z="top",c="width",B="height",G="position",h="display",f="z-index",j="px",l="0 0",R="absolute",L="visible",O="hidden",x="none",I="block",e="nowrap",n="rgba(0, 0, 0, 0.005)";E.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var U=X.graph.GraphView.prototype,P=U._42;U.adjustHtmlNodeIndex=!0,U._42=function(F,u){if(P.call(this,F,u),this.adjustHtmlNodeIndex)for(var G=this.getDataModel()._datas._as,Y=G.length,Z=1,k=0;Y>k;k++){var X=G[k];if(X instanceof A){var p=this.getDataUI(X);S(p.$2f,f,Z+""),S(p.$3f,f,Z+1+""),Z+=2}}};var Q=X.HtmlNodeUI=function(I,w){var E=this;Q.superClass.constructor.call(E,I,w);var m=E.$2f=d(),k=E.$3f=D();S(m,G,R),S(m,y,O),S(m,t,e),k.draggable=!1,S(k,G,R),S(k,h,x),v(k,l),W(m,"change",function(W){var V=W.target,P=V.bind||V.getAttribute("bind"),X=V.type&&"checkbox"===V.type?V.checked:V.value,r=w.getContext();P&&r&&(r[P]=X,E.$4f=JSON.stringify(r))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(_){W(m,_,this.$9f.bind(this))},E)};E.def(Q,p.ui().NodeUI,{_visible:!0,$11f:function(){var C=this,r=C.$3f,i=C._data,T=i.getDraggerImageWidth(),M=i.getDraggerImageHeight(),X=i.getDraggerImage(),_=p.initContext(r);_.beginPath(),p.setCanvas(r,T,M),p.translateAndScale(_,0,0,1),_.clearRect(0,0,T,M),E.drawImage(_,E.getImage(X),0,0,T,M),_.restore()},_80o:function(p){Q.superClass._80o.call(this,p);var b=this,g=b._data,M=g._padding,E=2*M,H=b.$2f,w=b.$3f,Y=b.gv,X=Y.getZoom(),$=Y.getTranslateX(),K=Y.getTranslateY(),i=Y.getView(),u=b._83o,W=g._width,D=g._height,Z=u.position,q=u.rotation,A=(W-E)/g.$5f*X,U=(D-E)/g.$6f*X,J=b._html,t=g._html,C=g.getHtmlType();if("html"===C){var F=g.getContext()||{},N=b.$4f,l=g.$10f,e=JSON.stringify(F);J&&N&&J===t&&N===e||(b.$4f=e,b._html=t,H.innerHTML=l?l(F):t)}else if(null!=C){var v=g.getHtml();"ht"===C&&(v=v.getView()),J&&J===v&&H.contains(J)||(b._html=v,H.innerHTML="",k(H,v))}if(!H.parentNode){var P=Y.$1f;if(!P){var V=d();S(V,G,R),S(V,f,"0"),P=Y.$1f=V;var T=Y._canvas.nextSibling;T?i.insertBefore(V,T):k(i,V)}k(P,H),k(P,w),g.onContentInitialized&&g.onContentInitialized(H)}if(g._scalable){var o=g.$5f,_=g.$6f;a(H,"rotate("+180*(q/m)+"deg) scale("+A+","+U+")"),S(H,c,""),S(H,B,""),S(H,r,(Z.x-o/X/2)*X+$+j),S(H,z,(Z.y-_/X/2)*X+K+j)}else{var Ob=s(H.style.width),Ne=s(H.style.height),Vd=s((W-E)*X),Qe=s((D-E)*X),Tg="100%",Ve=H.children[0];S(Ve,c,Tg),S(Ve,B,Tg),(Ob!==Vd||Ne!==Qe)&&(S(H,c,Vd+j),S(H,B,Qe+j),"ht"===C&&t.invalidate()),a(H,"rotate("+180*(q/m)+"deg)"),S(H,r,(Z.x-Vd/X/2)*X+$+j),S(H,z,(Z.y-Qe/X/2)*X+K+j)}var ym=b.dragRect;Y.isMovable(g)&&Y.isSelected(g)&&ym?(p.save(),p.fillStyle=n,p.fillRect(ym.x,ym.y,ym.width,ym.height),p.restore(),S(w,r,ym.x*X+$+j),S(w,z,ym.y*X+K+j),a(w,"scale("+X+","+X+")"),S(w,h,I),b.$11f()):S(w,h,x),S(H,y,this._visible?L:O)},dispose:function(){var _=this.gv.$1f;this.$2f.parentNode===_&&_.removeChild(this.$2f),this.$3f.parentNode===_&&_.removeChild(this.$3f)},_84o:function(N){this._visible=N,S(this.$2f,y,N?L:O),S(this.$3f,h,N?I:x)},_3O:function(){var x=this,p=x.gv,U=x._data;Q.superClass._3O.call(x);var G=U.getRect();p.isEditable(U)&&(x.dragRect={x:G.x+G.width+U._padding,y:G.y+10,width:U.getDraggerImageWidth(),height:U.getDraggerImageHeight()},x._68o(x.dragRect))},rectIntersects:function(I){var H=this._79o();return X.Default.intersection(H,I)?!0:void 0},$9f:function(i){var J=this.gv,K=this._data;J.sm().contains(K)&&i.stopPropagation()}});var A=X.HtmlNode=function(){A.superClass.constructor.call(this)};X.Default.def(A,X.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:X.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(T){var x=this,F=x._html;x._html=T,"html"===x.getHtmlType()&&"Handlebars"in V&&(x.$10f=Handlebars.compile(T)),x.$13f(),x.fp("html",F,T)},setContext:function(J){var G=this,R=G._context;G._context=J,G.fp("context",R,J),G.$13f()},setScalable:function(l){var t=this,c=t._scalable;t._scalable=l,t.fp("scalable",c,l),t.$13f()},getHtmlType:function(){var g=this._html;return g?"string"==typeof g?"html":g.getView?"ht":"dom":null},$13f:function(){var i=this,J=i._html,V=i.$10f;if(J){var F=d(),Q=!1,Y=i.getHtmlType();if(S(F,G,R),S(F,t,e),S(F,y,O),"html"===Y?(F.innerHTML=V?V(i.getContext()||{}):J,Q=!0):"ht"===Y?(k(F,J.getView()),Q=!0):"dom"===Y&&(k(F,J),Q=!0),Q){var M=2*i._padding;k(Z(),F),i.$5f=F.scrollWidth,i.$6f=F.scrollHeight,i._width=i.$5f+M,i._height=i.$6f+M,i._originWidth=i._width,i._originHeight=i._height,K(Z(),F)}}},getUIClass:function(){return X.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);