!function(E,N,G){"use strict";var S="ht",q=E[S],X=null,n=Math,p=n.PI,$=n.cos,K=n.sin,_=n.abs,j=n.max,U=n.sqrt,g=1e-5,k=q.Default,O=k.def,t=k.startAnim,v=k.createMatrix,B=k.transformVec,F=k.getInternal(),A=F.addMethod,H=F.superCall,w=F.toPointsArray,m=F.createNormals,r=F.toFloatArray,e=F.glMV,Z=(F.glPop,F.batchShape),J=F.createNodeMatrix,M=F.getFaceInfo,o=F.transformAppend,y=F.drawFaceInfo,I=F.createAnim,c=F.cube(),Y=c.is,x=c.vs,Q=c.uv,u=F.ui(),C=q.Node,T=q.Shape,L="h",z="v",V="front",D="back",P="left",d="right",s="top",l="bottom",i="dw.expanded",b=".expanded",f="dw.angle",W=".angle",a=function(l,V,i){O(S+"."+l,V,i)},h=function(s,X,I){I?s.push(X.x,X.y):s.push(X.x,X.y,X.z)},R=[1,0,0],Hq=function(r,$,g,v){var e,E,T,M,m=0,k=[];if(v)for(e=v.length;e>m;m+=3)E=v[m],T=v[m+1],M=v[m+2],k.push(new nj([new tl([$[3*E],$[3*E+1],$[3*E+2]],R,g?[g[2*E],g[2*E+1],0]:X),new tl([$[3*T],$[3*T+1],$[3*T+2]],R,g?[g[2*T],g[2*T+1],0]:X),new tl([$[3*M],$[3*M+1],$[3*M+2]],R,g?[g[2*M],g[2*M+1],0]:X)],r));else for(e=$.length;e>m;m+=3)E=m,T=m+1,M=m+2,k.push(new nj([new tl([$[3*E],$[3*E+1],$[3*E+2]],R,g?[g[2*E],g[2*E+1],0]:X),new tl([$[3*T],$[3*T+1],$[3*T+2]],R,g?[g[2*T],g[2*T+1],0]:X),new tl([$[3*M],$[3*M+1],$[3*M+2]],R,g?[g[2*M],g[2*M+1],0]:X)],r));return k},ve=[P,V,d,D,s,l],Ck=ve.concat("csg"),Hk=[0,6,12,18,24,30],Yf=function(v,O,L){var V=J(v),I=[];v.appendAnchorMatrix3d(V);for(var c=0;6>c;c++)for(var i=ve[c],D=Hk[c],j=L?O.getFaceUv(v,i):X,M=L?O.getFaceUvScale(v,i):X,Z=L?O.getFaceUvOffset(v,i):X,E=0;2>E;E++){var m,e,q,b=Y[D+3*E],$=Y[D+3*E+1],H=Y[D+3*E+2];if(L){if(j){var y=8*c;m=[j[2*b-y],j[2*b+1-y],0],e=[j[2*$-y],j[2*$+1-y],0],q=[j[2*H-y],j[2*H+1-y],0]}else m=[Q[2*b],Q[2*b+1],0],e=[Q[2*$],Q[2*$+1],0],q=[Q[2*H],Q[2*H+1],0];M&&(m[0]*=M[0],m[1]*=M[1],e[0]*=M[0],e[1]*=M[1],q[0]*=M[0],q[1]*=M[1]),Z&&(m[0]+=Z[0],m[1]+=Z[1],e[0]+=Z[0],e[1]+=Z[1],q[0]+=Z[0],q[1]+=Z[1])}I.push(new nj([new tl(B([x[3*b],x[3*b+1],x[3*b+2]],V),R,m),new tl(B([x[3*$],x[3*$+1],x[3*$+2]],V),R,e),new tl(B([x[3*H],x[3*H+1],x[3*H+2]],V),R,q)],v))}return Gj.$15n(I)},ok=function(T,x){var t,e=T.data.getAttaches();if(e&&e.each(function(m){m instanceof wq&&m.s("attach.operation")&&(t||(t=[]),t.push(m))}),t){var w;ve.forEach(function(_){var l=Hq(_,T[_].vs,T[_].tuv);w=w?w.concat(l):l}),w=Gj.$15n(w),t.forEach(function(g){var N=g.s("attach.operation");w[N]&&(w=w[N](Yf(g,T.gv,T.csg.tuv)))}),ve.forEach(function(f){f=T[f],f.vs=[],f.tuv&&(f.tuv=[])}),w.$19n().forEach(function(e){var V=e.$10n;if(V instanceof wq){if(V.s("attach.cull"))return;V="csg"}for(var W=T[V],K=W.vs,l=W.tuv,M=e.$9n,A=2;A<M.length;A++)h(K,M[0].$24n),h(K,M[A-1].$24n),h(K,M[A].$24n),l&&(h(l,M[0].uv,!0),h(l,M[A-1].uv,!0),h(l,M[A].uv,!0))})}Ck.forEach(function(a){var K=T[a];K.visible&&K.vs.length?(K.ns=m(K.vs),r(K,"vs"),r(K,"tuv")):delete T[a]}),x&&(Z(T,X,x),T.clear())};A(k,{createFrameModel:function(d,B,j,h){d=d==X?.07:d,B=B==X?d:B,j=j==X?d:j,h=h?h:{};var I=h.top,Y=h.bottom,g=h.left,u=h.right,c=h.front,r=h.back,z=[],y=[];return c===!0?(z.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),y.push(0,0,0,1,1,1,1,1,1,0,0,0)):c===!1||(z.push(-.5,.5,.5,-.5,-.5,.5,-.5+d,-.5,.5,-.5+d,-.5,.5,-.5+d,.5,.5,-.5,.5,.5,.5-d,.5,.5,.5-d,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-d,.5,.5,-.5+d,.5,.5,-.5+d,.5-B,.5,.5-d,.5-B,.5,.5-d,.5-B,.5,.5-d,.5,.5,-.5+d,.5,.5,-.5+d,-.5+B,.5,-.5+d,-.5,.5,.5-d,-.5,.5,.5-d,-.5,.5,.5-d,-.5+B,.5,-.5+d,-.5+B,.5),y.push(0,0,0,1,d,1,d,1,d,0,0,0,1-d,0,1-d,1,1,1,1,1,1,0,1-d,0,d,0,d,B,1-d,B,1-d,B,1-d,0,d,0,d,1-B,d,1,1-d,1,1-d,1,1-d,1-B,d,1-B)),r===!0?(z.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),y.push(1,0,0,1,1,1,0,1,1,0,0,0)):r===!1||(z.push(-.5,.5,-.5,-.5+d,-.5,-.5,-.5,-.5,-.5,-.5+d,-.5,-.5,-.5,.5,-.5,-.5+d,.5,-.5,.5-d,.5,-.5,.5,-.5,-.5,.5-d,-.5,-.5,.5,-.5,-.5,.5-d,.5,-.5,.5,.5,-.5,-.5+d,.5,-.5,.5-d,.5-B,-.5,-.5+d,.5-B,-.5,.5-d,.5-B,-.5,-.5+d,.5,-.5,.5-d,.5,-.5,-.5+d,-.5+B,-.5,.5-d,-.5,-.5,-.5+d,-.5,-.5,.5-d,-.5,-.5,-.5+d,-.5+B,-.5,.5-d,-.5+B,-.5),y.push(1,0,1-d,1,1,1,1-d,1,1,0,1-d,0,d,0,0,1,d,1,0,1,d,0,0,0,1-d,0,d,B,1-d,B,d,B,1-d,0,d,0,1-d,1-B,d,1,1-d,1,d,1,1-d,1-B,d,1-B)),g===!0?(z.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),y.push(0,0,0,1,1,1,1,1,1,0,0,0)):g===!1||(z.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+j,-.5,-.5,-.5+j,-.5,.5,-.5+j,-.5,.5,-.5,-.5,.5,.5-j,-.5,-.5,.5-j,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-j,-.5,.5,-.5+j,-.5,.5-B,-.5+j,-.5,.5-B,.5-j,-.5,.5-B,.5-j,-.5,.5,.5-j,-.5,.5,-.5+j,-.5,-.5+B,-.5+j,-.5,-.5,-.5+j,-.5,-.5,.5-j,-.5,-.5,.5-j,-.5,-.5+B,.5-j,-.5,-.5+B,-.5+j),y.push(0,0,0,1,j,1,j,1,j,0,0,0,1-j,0,1-j,1,1,1,1,1,1,0,1-j,0,j,0,j,B,1-j,B,1-j,B,1-j,0,j,0,j,1-B,j,1,1-j,1,1-j,1,1-j,1-B,j,1-B)),u===!0?(z.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),y.push(1,0,0,1,1,1,0,1,1,0,0,0)):u===!1||(z.push(.5,.5,-.5,.5,-.5,-.5+j,.5,-.5,-.5,.5,-.5,-.5+j,.5,.5,-.5,.5,.5,-.5+j,.5,.5,.5-j,.5,-.5,.5,.5,-.5,.5-j,.5,-.5,.5,.5,.5,.5-j,.5,.5,.5,.5,.5,-.5+j,.5,.5-B,.5-j,.5,.5-B,-.5+j,.5,.5-B,.5-j,.5,.5,-.5+j,.5,.5,.5-j,.5,-.5+B,-.5+j,.5,-.5,.5-j,.5,-.5,-.5+j,.5,-.5,.5-j,.5,-.5+B,-.5+j,.5,-.5+B,.5-j),y.push(1,0,1-j,1,1,1,1-j,1,1,0,1-j,0,j,0,0,1,j,1,0,1,j,0,0,0,1-j,0,j,B,1-j,B,j,B,1-j,0,j,0,1-j,1-B,j,1,1-j,1,j,1,1-j,1-B,j,1-B)),I===!0?(z.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),y.push(1,1,1,0,0,0,0,0,0,1,1,1)):I===!1||(z.push(.5,.5,.5,.5,.5,-.5,.5-d,.5,-.5,.5-d,.5,-.5,.5-d,.5,.5,.5,.5,.5,-.5+d,.5,.5,-.5+d,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+d,.5,.5,.5-d,.5,.5,.5-d,.5,.5-j,-.5+d,.5,.5-j,-.5+d,.5,.5-j,-.5+d,.5,.5,.5-d,.5,.5,.5-d,.5,-.5+j,.5-d,.5,-.5,-.5+d,.5,-.5,-.5+d,.5,-.5,-.5+d,.5,-.5+j,.5-d,.5,-.5+j),y.push(1,1,1,0,1-d,0,1-d,0,1-d,1,1,1,d,1,d,0,0,0,0,0,0,1,d,1,1-d,1,1-d,1-j,d,1-j,d,1-j,d,1,1-d,1,1-d,j,1-d,0,d,0,d,0,d,j,1-d,j)),Y===!0?(z.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),y.push(1,0,0,1,1,1,0,1,1,0,0,0)):Y===!1||(z.push(.5,-.5,.5,.5-d,-.5,-.5,.5,-.5,-.5,.5-d,-.5,-.5,.5,-.5,.5,.5-d,-.5,.5,-.5+d,-.5,.5,-.5,-.5,-.5,-.5+d,-.5,-.5,-.5,-.5,-.5,-.5+d,-.5,.5,-.5,-.5,.5,.5-d,-.5,.5,-.5+d,-.5,.5-j,.5-d,-.5,.5-j,-.5+d,-.5,.5-j,.5-d,-.5,.5,-.5+d,-.5,.5,.5-d,-.5,-.5+j,-.5+d,-.5,-.5,.5-d,-.5,-.5,-.5+d,-.5,-.5,.5-d,-.5,-.5+j,-.5+d,-.5,-.5+j),y.push(1,0,1-d,1,1,1,1-d,1,1,0,1-d,0,d,0,0,1,d,1,0,1,d,0,0,0,1-d,0,d,j,1-d,j,d,j,1-d,0,d,0,1-d,1-j,d,1,1-d,1,d,1,1-d,1-j,d,1-j)),{vs:z,uv:y}}}),A(q.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":G,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":p/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),ve.forEach(function(c){var i={};i[c+b]=!1,i[c+".toggleable"]=!1,i[c+".axis"]=P,i[c+".start"]=0,i[c+".end"]=p/2,i[c+W]=0,A(q.Style,i,!0)});var Gj=function(){this.$4n=[]};Gj.$15n=function(z){var C=new Gj;return C.$4n=z,C},Gj.prototype={clone:function(){var F=new Gj;return F.$4n=this.$4n.map(function(Z){return Z.clone()}),F},$19n:function(){return this.$4n},union:function(C){var J=new Jn(this.clone().$4n),A=new Jn(C.clone().$4n);return J.$3n(A),A.$3n(J),A.$6n(),A.$3n(J),A.$6n(),J.$7n(A.$2n()),Gj.$15n(J.$2n())},subtract:function(q){var R=new Jn(this.clone().$4n),W=new Jn(q.clone().$4n);return R.$6n(),R.$3n(W),W.$3n(R),W.$6n(),W.$3n(R),W.$6n(),R.$7n(W.$2n()),R.$6n(),Gj.$15n(R.$2n())},intersect:function(R){var y=new Jn(this.clone().$4n),g=new Jn(R.clone().$4n);return y.$6n(),g.$3n(y),g.$6n(),y.$3n(g),g.$3n(y),y.$7n(g.$2n()),y.$6n(),Gj.$15n(y.$2n())},inverse:function(){var X=this.clone();return X.$4n.map(function(N){N.flip()}),X}},Gj.cube=function(X){X=X||{};var I=new hc(X.center||[0,0,0]),c=X.radius?X.radius.length?X.radius:[X.radius,X.radius,X.radius]:[1,1,1];return Gj.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(P){return new nj(P[0].map(function(F){var l=new hc(I.x+c[0]*(2*!!(1&F)-1),I.y+c[1]*(2*!!(2&F)-1),I.z+c[2]*(2*!!(4&F)-1));return new tl(l,new hc(P[1]))}))}))},Gj.sphere=function(B){function i(Q,b){Q*=2*p,b*=p;var i=new hc($(Q)*K(b),$(b),K(Q)*K(b));a.push(new tl(k.$20n(i.$21n(x)),i))}B=B||{};for(var a,k=new hc(B.center||[0,0,0]),x=B.radius||1,R=B.slices||16,I=B.stacks||8,o=[],c=0;R>c;c++)for(var M=0;I>M;M++)a=[],i(c/R,M/I),M>0&&i((c+1)/R,M/I),I-1>M&&i((c+1)/R,(M+1)/I),i(c/R,(M+1)/I),o.push(new nj(a));return Gj.$15n(o)},Gj.cylinder=function(L){function w(h,C,Q){var W=2*C*p,v=l.$21n($(W)).$20n(G.$21n(K(W))),J=A.$20n(r.$21n(h)).$20n(v.$21n(b)),N=v.$21n(1-_(Q)).$20n(X.$21n(Q));return new tl(J,N)}L=L||{};for(var A=new hc(L.start||[0,-1,0]),P=new hc(L.end||[0,1,0]),r=P.$13n(A),b=L.radius||1,j=L.slices||16,X=r.$14n(),k=_(X.y)>.5,l=new hc(k,!k,0).$12n(X).$14n(),G=l.$12n(X).$14n(),i=new tl(A,X.$11n()),S=new tl(P,X.$14n()),y=[],d=0;j>d;d++){var h=d/j,T=(d+1)/j;y.push(new nj([i,w(0,h,-1),w(0,T,-1)])),y.push(new nj([w(0,T,0),w(0,h,0),w(1,h,0),w(1,T,0)])),y.push(new nj([S,w(1,T,1),w(1,h,1)]))}return Gj.$15n(y)};var hc=function(U,M,h){var k=this;3==arguments.length?(k.x=U,k.y=M,k.z=h):"x"in U?(k.x=U.x,k.y=U.y,k.z=U.z):(k.x=U[0],k.y=U[1],k.z=U[2])};hc.prototype={clone:function(){return new hc(this.x,this.y,this.z)},$11n:function(){return new hc(-this.x,-this.y,-this.z)},$20n:function(z){return new hc(this.x+z.x,this.y+z.y,this.z+z.z)},$13n:function(B){return new hc(this.x-B.x,this.y-B.y,this.z-B.z)},$21n:function(O){return new hc(this.x*O,this.y*O,this.z*O)},$16n:function(G){return new hc(this.x/G,this.y/G,this.z/G)},$23n:function(q){return this.x*q.x+this.y*q.y+this.z*q.z},lerp:function(g,_){return this.$20n(g.$13n(this).$21n(_))},length:function(){return U(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(K){var o=this;return new hc(o.y*K.z-o.z*K.y,o.z*K.x-o.x*K.z,o.x*K.y-o.y*K.x)}};var tl=function(h,l,O){var y=this;y.$24n=new hc(h),y.$22n=new hc(l),y.uv=O?new hc(O):null};tl.prototype={clone:function(){var I=this;return new tl(I.$24n.clone(),I.$22n.clone(),I.uv?I.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(y,R){var i=this;return new tl(i.$24n.lerp(y.$24n,R),i.$22n.lerp(y.$22n,R),i.uv?i.uv.lerp(y.uv,R):null)}};var $i=function(Y,g){this.$22n=Y,this.w=g};$i.$17n=function(t,u,e){var D=u.$13n(t).$12n(e.$13n(t)).$14n();return new $i(D,D.$23n(t))},$i.prototype={clone:function(){return new $i(this.$22n.clone(),this.w)},flip:function(){var M=this;M.$22n=M.$22n.$11n(),M.w=-M.w},$5n:function($,x,R,G,A){for(var B=this,v=0,F=1,d=2,Y=3,l=0,L=[],s=0;s<$.$9n.length;s++){var i=B.$22n.$23n($.$9n[s].$24n)-B.w,I=-g>i?d:i>g?F:v;l|=I,L.push(I)}switch(l){case v:(B.$22n.$23n($.$8n.$22n)>0?x:R).push($);break;case F:G.push($);break;case d:A.push($);break;case Y:for(var V=[],S=[],s=0;s<$.$9n.length;s++){var Q=(s+1)%$.$9n.length,P=L[s],k=L[Q],f=$.$9n[s],q=$.$9n[Q];if(P!=d&&V.push(f),P!=F&&S.push(P!=d?f.clone():f),(P|k)==Y){var i=(B.w-this.$22n.$23n(f.$24n))/B.$22n.$23n(q.$24n.$13n(f.$24n)),h=f.$18n(q,i);V.push(h),S.push(h.clone())}}V.length>=3&&G.push(new nj(V,$.$10n)),S.length>=3&&A.push(new nj(S,$.$10n))}}};var nj=function(j,T){var h=this;h.$9n=j,h.$10n=T,h.$8n=$i.$17n(j[0].$24n,j[1].$24n,j[2].$24n)};nj.prototype={clone:function(){var P=this.$9n.map(function(G){return G.clone()});return new nj(P,this.$10n)},flip:function(){this.$9n.reverse().map(function(g){g.flip()}),this.$8n.flip()}};var Jn=function(b){var T=this;T.$8n=null,T.front=null,T.back=null,T.$4n=[],b&&T.$7n(b)};Jn.prototype={clone:function(){var E=this,D=new Jn;return D.$8n=E.$8n&&E.$8n.clone(),D.front=E.front&&E.front.clone(),D.back=E.back&&E.back.clone(),D.$4n=E.$4n.map(function(d){return d.clone()}),D},$6n:function(){for(var B=this,G=0;G<B.$4n.length;G++)B.$4n[G].flip();B.$8n&&B.$8n.flip(),B.front&&B.front.$6n(),B.back&&B.back.$6n();var T=B.front;B.front=B.back,B.back=T},$1n:function(b){var r=this;if(!r.$8n)return b.slice();for(var B=[],T=[],j=0;j<b.length;j++)r.$8n.$5n(b[j],B,T,B,T);return r.front&&(B=r.front.$1n(B)),T=r.back?r.back.$1n(T):[],B.concat(T)},$3n:function(O){var n=this;n.$4n=O.$1n(n.$4n),n.front&&n.front.$3n(O),n.back&&n.back.$3n(O)},$2n:function(){var i=this,F=i.$4n.slice();return i.front&&(F=F.concat(i.front.$2n())),i.back&&(F=F.concat(i.back.$2n())),F},$7n:function(h){var t=this;if(h.length){t.$8n||(t.$8n=h[0].$8n.clone());for(var M=[],q=[],m=0;m<h.length;m++)this.$8n.$5n(h[m],t.$4n,t.$4n,M,q);M.length&&(t.front||(t.front=new Jn),this.front.$7n(M)),q.length&&(t.back||(t.back=new Jn),t.back.$7n(q))}}};var Ik="symbol",xm=q.Symbol=function(A,n,S){var g=this;H(xm,g),g.s3(20,20,20),g.s({"all.visible":!1,shape:"rect"}),g.setIcon(A,n,S)};a("Symbol",C,{setIcon:function(d,V,Y){var W,t=this;return xm.superClass.setIcon.call(t,d),d?(W={for3d:!0,face:"center",position:44,names:[d]},Y&&(W.transaprent=!0),V&&(W.autorotate=V),t.addStyleIcon(Ik,W)):t.removeStyleIcon(Ik),t.setWidth(F.getImageWidth(k.getImage(d),t)||20),W}});var wq=q.CSGNode=function(){H(wq,this),this.s({shape:"rect","attach.thickness":1.001,"2d.attachable":!0})},ed={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,anchor:1,anchorElevation:1,"s:attach.cull":1,"s:attach.operation":1};a("CSGNode",C,{_22Q:function(){return cq},onPropertyChanged:function(h){var G=this,e=G.getHost();wq.superClass.onPropertyChanged.call(G,h),ed[h.property]&&(e instanceof hi||e instanceof wq)&&e.fp("csgNodeChange",!0,!1)}});var cq=function(h,t){H(cq,this,[h,t])};O(cq,u.Node3dUI,{_80o:function(v,c,f){var l=this;l._shape3d?cq.superClass._80o.call(l,v,c,f):(e(l.gv),Ck.forEach(function(Q){y(l,v,c,Q,f)}))},validate:function(Z,C){var f=this,S=f.gv,n=f.data;if(n.s("shape3d"))return cq.superClass.validate.call(f,Z,C),f._shape3d=!0,void 0;f._shape3d=!1;var U=J(n,S.getMat(n));n.appendAnchorMatrix3d(U);var m=Z&&Z.uv;f.vf2("csg",m);for(var q=0;6>q;q++)for(var E=ve[q],h=Hk[q],H=f.vf2(E,m,C),g=H.mat||U,e=H.vs,L=H.uv,i=H.tuv,v=0;2>v;v++){var a=Y[h+3*v],M=Y[h+3*v+1],T=Y[h+3*v+2];if(o(e,g,[x[3*a],x[3*a+1],x[3*a+2]]),o(e,g,[x[3*M],x[3*M+1],x[3*M+2]]),o(e,g,[x[3*T],x[3*T+1],x[3*T+2]]),i)if(L){var X=8*q;i.push(L[2*a-X],L[2*a+1-X],L[2*M-X],L[2*M+1-X],L[2*T-X],L[2*T+1-X])}else i.push(Q[2*a],Q[2*a+1],Q[2*M],Q[2*M+1],Q[2*T],Q[2*T+1])}ok(f,Z,C)},vf2:function(b,P,Q){var U,$=this,j=$.gv.getFaceVisible($.data,b);return U=M($,b,Q),U.vs=[],U.tuv=j&&(U.texture||P)?[]:X,U.visible=j,U}});var hi=q.CSGShape=function(){var f=this;H(hi,f),f.s({"shape.background":X,"2d.hostable":!0,"shape.border.width":8}),f.setTall(240),f.setElevation(120),f.setThickness(14)};a("CSGShape",T,{IRotatable:!1,_22Q:function(){return jb},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var jb=function(j,T){H(jb,this,[j,T])};O(jb,u.Shape3dUI,{_80o:function(T,P,p){var w=this;w.undrawable||(e(w.gv),Ck.forEach(function(b){y(w,T,P,b,p)}))},validate:function(V,K){var e=this,Y=e.data,P=Y.getPoints();if(e.undrawable=P.size()<2)return e.clear(),void 0;var p=Y.isClosePath(),H=j(Y._thickness/2,g),S=w(P,X,X,p);Ck.forEach(function(U){e.vf(U,V&&V.uv,!0,K)}),p&&(e.left.visible=!1,e.right.visible=!1),e._12O(S,H),e._20Q(S);var B=Y.getPointsMatrix3d(),L=q.Math.requestVector3();ve.forEach(function(K){if(e[K])for(var x=e[K].vs,_=0,R=x.length;R>_;_+=3)L.set(x[_],x[_+1],x[_+2]).applyMatrix4(B),x[_]=L.x,x[_+1]=L.y,x[_+2]=L.z}),q.Math.releaseVector3(L),ok(e,V,K)}});var ms=q.DoorWindow=function(){var P=this;H(ms,P),P.setElevation(100),P.s3(100,200,14)};a("DoorWindow",wq,{IDoorWindow:!0,toggle:function(S){this.setExpanded(!this.s(i),S)},isExpanded:function(){return this.s(i)},setExpanded:function(p,o){var j=this,O=j.$25n,m=j.getDataModel(),Y=j.s(i);if(O&&(O.stop(!0),delete j.$25n),Y!==p){m&&m.beginTransaction();var v=p?j.s("dw.end"):j.s("dw.start");j.s(i,p),o=I(o),o?(Y=j.s(f),o.action=function(m){j.s(f,Y+(v-Y)*m)},o.finishFunc=function(){m&&m.endTransaction()},j.$25n=t(o)):(j.s(f,v),m&&m.endTransaction())}},getMat:function(){var w=this,U=w.s("dw.s3"),Z=w.s("dw.t3"),H=w.s("dw.flip"),g=w.s(f);if(U||g||Z||H){var F=[];if(H&&F.push({r3:[0,p,0]}),U&&F.push({s3:U}),g){U=w.getFinalScale3d();var I=w.s("dw.axis"),T=U[0]/2,b=U[1]/2;U[2]/2,I===P?F.push({t3:[T,0,0]},{r3:[0,-g,0]},{t3:[-T,0,0]}):I===d?F.push({t3:[-T,0,0]},{r3:[0,g,0]},{t3:[T,0,0]}):I===s?F.push({t3:[0,-b,0]},{r3:[-g,0,0]},{t3:[0,b,0]}):I===l?F.push({t3:[0,b,0]},{r3:[g,0,0]},{t3:[0,-b,0]}):I===z?F.push({r3:[0,g,0]}):I===L&&F.push({r3:[g,0,0]})}return Z&&F.push({t3:Z}),v(F)}return X}});var Do=q.CSGBox=function(){var i=this;H(Do,i),i.setElevation(100),i.s3(100,200,100)};a("CSGBox",wq,{ICSGBox:!0,toggleFace:function(y,M){this.setFaceExpanded(y,!this.s(y+b),M)},isFaceExpanded:function(l){return this.s(l+b)},setFaceExpanded:function(l,i,U){var y=this,w=y.$25n,r=y.s(l+b);if(w&&(w.stop(!0),delete y.$25n),r!==i){var d=i?y.s(l+".end"):y.s(l+".start");y.s(l+b,i),U=I(U),U?(r=y.s(l+W),U.action=function(t){y.s(l+W,r+(d-r)*t)},y.$25n=t(U)):y.s(l+W,d)}},getFaceMat:function(M){var x=this,J=x.s(M+W);if(!J)return X;var D,F,w,A,d,s,e=x.s(M+".axis"),Y=x.getFinalScale3d(),$=x.getAnchor3d(),u=Y[0]*$.x,H=Y[1]*$.y,y=Y[2]*$.z,C=Y[0]-u,L=Y[1]-H,U=Y[2]-y,g=M+"_"+e;switch(g){case"front_left":D=-u,F=0,w=U,A=0,d=-J,s=0;break;case"front_right":D=C,F=0,w=U,A=0,d=J,s=0;break;case"front_top":D=0,F=L,w=U,A=-J,d=0,s=0;break;case"front_bottom":D=0,F=-H,w=U,A=J,d=0,s=0;break;case"front_h":D=0,F=0,w=U,A=J,d=0,s=0;break;case"front_v":D=0,F=0,w=U,A=0,d=J,s=0;break;case"back_left":D=C,F=0,w=-y,A=0,d=-J,s=0;break;case"back_right":D=-u,F=0,w=-y,A=0,d=J,s=0;break;case"back_top":D=0,F=L,w=-y,A=J,d=0,s=0;break;case"back_bottom":D=0,F=-H,w=-y,A=-J,d=0,s=0;break;case"back_h":D=0,F=0,w=-y,A=J,d=0,s=0;break;case"back_v":D=0,F=0,w=-y,A=0,d=J,s=0;break;case"left_left":D=-u,F=0,w=-y,A=0,d=-J,s=0;break;case"left_right":D=-u,F=0,w=U,A=0,d=J,s=0;break;case"left_top":D=-u,F=L,w=0,A=0,d=0,s=-J;break;case"left_bottom":D=-u,F=-H,w=0,A=0,d=0,s=J;break;case"left_h":D=-u,F=0,w=0,A=0,d=0,s=J;break;case"left_v":D=-u,F=0,w=0,A=0,d=J,s=0;break;case"right_left":D=C,F=0,w=U,A=0,d=-J,s=0;break;case"right_right":D=C,F=0,w=-y,A=0,d=J,s=0;break;case"right_top":D=C,F=L,w=0,A=0,d=0,s=J;break;case"right_bottom":D=C,F=-H,w=0,A=0,d=0,s=-J;break;case"right_h":D=C,F=0,w=0,A=0,d=0,s=J;break;case"right_v":D=C,F=0,w=0,A=0,d=J,s=0;break;case"top_left":D=-u,F=L,w=0,A=0,d=0,s=J;break;case"top_right":D=C,F=L,w=0,A=0,d=0,s=-J;break;case"top_top":D=0,F=L,w=-y,A=-J,d=0,s=0;break;case"top_bottom":D=0,F=L,w=U,A=J,d=0,s=0;break;case"top_h":D=0,F=L,w=0,A=J,d=0,s=0;break;case"top_v":D=0,F=L,w=0,A=0,d=0,s=J;break;case"bottom_left":D=-u,F=-H,w=0,A=0,d=0,s=-J;break;case"bottom_right":D=C,F=-H,w=0,A=0,d=0,s=J;break;case"bottom_top":D=0,F=-H,w=U,A=-J,d=0,s=0;break;case"bottom_bottom":D=0,F=-H,w=-y,A=J,d=0,s=0;break;case"bottom_h":D=0,F=-H,w=0,A=J,d=0,s=0;break;case"bottom_v":D=0,F=-H,w=0,A=0,d=0,s=J}return v([{t3:[-D,-F,-w]},{r3:[A,d,s]},{t3:[D,F,w]}])}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);