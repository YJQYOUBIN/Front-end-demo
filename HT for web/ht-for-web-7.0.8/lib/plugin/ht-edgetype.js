!function(V){"use strict";var R="ht",l=V[R],s=Math,m=s.max,M=s.min,I=s.abs,F=s.atan2,A=(s.cos,s.sin,s.ceil),h=l.Default,z=h.getInternal(),T=l.List,a=z.Mat,C=z.getNodeRect,P=z.intersectionLineRect,N=h.getDistance,n=h.setEdgeType,d="left",_="right",q="top",i="bottom",y="edge.type",b="edge.gap",O="edge.center",k="edge.extend",J=function(o,V){return C(o,V).width},Y=function(s,E){return C(s,E).height},Q=function(b,x){return z.getEdgeHostPosition(b,x,"source")},H=function(a,x){return z.getEdgeHostPosition(a,x,"target")},K=function(t,v){var f=t.s(y),P=t.getEdgeGroup();if(P){var U=0;if(P.eachSiblingEdge(function(Q){v.isVisible(Q)&&Q.s(y)==f&&U++}),U>1)return t.s(b)*(U-1)/2}return 0},x=function(g,z){var N=g.s(y),f=g.isLooped();if(!g.getEdgeGroup())return f?g.s(b):0;var h,F=0,D=0,R=0;return g.getEdgeGroup().getSiblings().each(function(T){T.each(function(n){if(n._40I===g._40I&&n.s(y)==N&&z.isVisible(n)){var J=n.s(b);h?(D+=R/2+J/2,R=J):(h=n,R=J),n===g&&(F=D)}})}),f?D-F+R:F-D/2},u=function(d,b){var l=b.s("edge.corner.radius");return h.toRoundedCorner(d,l)};z.addMethod(l.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),n("boundary",function(n,c,g,w){w||(c=-c);var r,I=Q(g,n),i=H(g,n),x=C(g,n._40I),k=C(g,n._41I),X=new a(F(i.y-I.y,i.x-I.x)),Y=N(I,i),y=I.x,b=I.y;return r=X.tf(0,c),I={x:r.x+y,y:r.y+b},r=X.tf(Y,c),i={x:r.x+y,y:r.y+b},r=P(I,i,x),r&&(I={x:r[0],y:r[1]}),r=P(I,i,k),r&&(i={x:r[0],y:r[1]}),{points:new T([I,i])}}),n("ripple",function(d,t,x,V){V||(t=-t);var K=Q(x,d),P=H(x,d),i=N(K,P),c=M(d.s("edge.offset"),i/2),W=d.s("edge.ripple.size"),J=d.s("edge.ripple.length"),p=d.s("edge.ripple.both"),q=d.s(O),L=d.s("edge.ripple.elevation"),o=new T,r=d.s("edge.ripple.straight")?null:new T,k=new a(F(P.y-K.y,P.x-K.x));V||(L=-L),i-=2*c,J>0&&(W=A(i/J));var Z=i/W;r&&r.add(1);for(var m=0;W>m;m++)r&&r.add(3),0===m?o.add({x:c+Z*m,y:q?0:t}):o.add({x:c+Z*m,y:t}),o.add({x:c+Z*m+Z/2,y:L+t}),p&&(L=-L);for(o.add({x:c+i,y:q?0:t}),m=0;m<o.size();m++){var n=k.tf(o.get(m));n.x+=K.x,n.y+=K.y,o.set(m,n)}return{points:o,segments:r}}),n("h.v",function(q,j,L){j=x(q,L);var M=new T,U=q.s(O),X=Q(L,q),n=X.x,s=X.y,Z=H(L,q),B=Z.x,S=Z.y,e=q._40I instanceof l.Edge,v=q._41I instanceof l.Edge,N=0,h=0,_=B-n,G=S-s;return U||(N=e?0:J(L,q._40I)/2,h=v?0:Y(L,q._41I)/2),_>=0&&0>=G?(M.add({x:n+N,y:s+j}),M.add({x:B+j,y:s+j}),M.add({x:B+j,y:S+h})):0>=_&&G>=0?(M.add({x:n-N,y:s+j}),M.add({x:B+j,y:s+j}),M.add({x:B+j,y:S-h})):_>=0&&G>=0?(M.add({x:n+N,y:s+j}),M.add({x:B-j,y:s+j}),M.add({x:B-j,y:S-h})):(M.add({x:n-N,y:s+j}),M.add({x:B-j,y:s+j}),M.add({x:B-j,y:S+h})),u(M,q)}),n("v.h",function(o,i,L){i=x(o,L);var W=new T,A=o.s(O),$=Q(L,o),f=$.x,d=$.y,t=H(L,o),D=t.x,h=t.y,C=o._40I instanceof l.Edge,c=o._41I instanceof l.Edge,y=0,e=0,g=D-f,U=h-d;return A||(y=c?0:J(L,o._41I)/2,e=C?0:Y(L,o._40I)/2),g>=0&&0>=U?(W.add({x:f+i,y:d-e}),W.add({x:f+i,y:h+i}),W.add({x:D-y,y:h+i})):0>=g&&U>=0?(W.add({x:f+i,y:d+e}),W.add({x:f+i,y:h+i}),W.add({x:D+y,y:h+i})):g>=0&&U>=0?(W.add({x:f-i,y:d+e}),W.add({x:f-i,y:h+i}),W.add({x:D-y,y:h+i})):(W.add({x:f-i,y:d-e}),W.add({x:f-i,y:h+i}),W.add({x:D+y,y:h+i})),u(W,o)}),n("ortho",function(D,L,j){var V=new T,q=D.s(O),e=D.s("edge.ortho"),N=D._40I,C=D._41I,s=Q(j,D),U=s.x,r=s.y,M=H(j,D),Z=M.x,_=M.y,o=Z-U,G=_-r,B=N instanceof l.Edge,g=C instanceof l.Edge,z=q||B?0:J(j,N)/2,y=q||B?0:Y(j,N)/2,W=q||g?0:J(j,C)/2,X=q||g?0:Y(j,C)/2,P=(o-(z+W)*(o>0?1:-1))*e,t=(G-(y+X)*(G>0?1:-1))*e;return I(o)<I(G)?o>=0&&0>=G?(V.add({x:U+L,y:r-y}),V.add({x:U+L,y:r+t+L-y}),V.add({x:Z+L,y:r+t+L-y}),V.add({x:Z+L,y:_+X})):0>=o&&G>=0?(V.add({x:U+L,y:r+y}),V.add({x:U+L,y:r+t+L+y}),V.add({x:Z+L,y:r+t+L+y}),V.add({x:Z+L,y:_-X})):o>=0&&G>=0?(V.add({x:U+L,y:r+y}),V.add({x:U+L,y:r+t-L+y}),V.add({x:Z+L,y:r+t-L+y}),V.add({x:Z+L,y:_-X})):(V.add({x:U+L,y:r-y}),V.add({x:U+L,y:r+t-L-y}),V.add({x:Z+L,y:r+t-L-y}),V.add({x:Z+L,y:_+X})):o>=0&&0>=G?(V.add({x:U+z,y:r+L}),V.add({x:U+P+L+z,y:r+L}),V.add({x:U+P+L+z,y:_+L}),V.add({x:Z-W,y:_+L})):0>=o&&G>=0?(V.add({x:U-z,y:r+L}),V.add({x:U+P+L-z,y:r+L}),V.add({x:U+P+L-z,y:_+L}),V.add({x:Z+W,y:_+L})):o>=0&&G>=0?(V.add({x:U+z,y:r+L}),V.add({x:U+P-L+z,y:r+L}),V.add({x:U+P-L+z,y:_+L}),V.add({x:Z-W,y:_+L})):(V.add({x:U-z,y:r+L}),V.add({x:U+P-L-z,y:r+L}),V.add({x:U+P-L-z,y:_+L}),V.add({x:Z+W,y:_+L})),u(V,D)}),n("flex",function(m,v,L){var V=new T,E=m.s("edge.flex")+K(m,L),Z=m.s(O),_=m._40I,B=m._41I,M=Q(L,m),F=M.x,s=M.y,c=H(L,m),a=c.x,r=c.y,R=_ instanceof l.Edge,P=B instanceof l.Edge,U=a-F,j=r-s,n=Z||R?0:J(L,_)/2,z=Z||R?0:Y(L,_)/2,S=Z||P?0:J(L,B)/2,y=Z||P?0:Y(L,B)/2,d=U>0?E:-E,$=j>0?E:-E;return I(U)<I(j)?U>=0&&0>=j?(V.add({x:F+v,y:s-z}),V.add({x:F+v,y:s+$+v-z}),V.add({x:a+v,y:r-$+v+y}),V.add({x:a+v,y:r+y})):0>=U&&j>=0?(V.add({x:F+v,y:s+z}),V.add({x:F+v,y:s+$+v+z}),V.add({x:a+v,y:r-$+v-y}),V.add({x:a+v,y:r-y})):U>=0&&j>=0?(V.add({x:F+v,y:s+z}),V.add({x:F+v,y:s+$-v+z}),V.add({x:a+v,y:r-$-v-y}),V.add({x:a+v,y:r-y})):(V.add({x:F+v,y:s-z}),V.add({x:F+v,y:s+$-v-z}),V.add({x:a+v,y:r-$-v+y}),V.add({x:a+v,y:r+y})):U>=0&&0>=j?(V.add({x:F+n,y:s+v}),V.add({x:F+d+v+n,y:s+v}),V.add({x:a-d+v-S,y:r+v}),V.add({x:a-S,y:r+v})):0>=U&&j>=0?(V.add({x:F-n,y:s+v}),V.add({x:F+d+v-n,y:s+v}),V.add({x:a-d+v+S,y:r+v}),V.add({x:a+S,y:r+v})):U>=0&&j>=0?(V.add({x:F+n,y:s+v}),V.add({x:F+d-v+n,y:s+v}),V.add({x:a-d-v-S,y:r+v}),V.add({x:a-S,y:r+v})):(V.add({x:F-n,y:s+v}),V.add({x:F+d-v-n,y:s+v}),V.add({x:a-d-v+S,y:r+v}),V.add({x:a+S,y:r+v})),u(V,m)}),n("extend.east",function(M,N,F){var y=new T,$=M.s(k)+K(M,F),h=M.s(O),W=Q(F,M),B=M._40I instanceof l.Edge,X=M._41I instanceof l.Edge,r=W.x+(h||B?0:J(F,M._40I)/2),V=W.y,I=H(F,M),_=I.x+(h||X?0:J(F,M._41I)/2),A=I.y,i=m(r,_)+$;return V>A?(y.add({x:r,y:V+N}),y.add({x:i+N,y:V+N}),y.add({x:i+N,y:A-N}),y.add({x:_,y:A-N})):(y.add({x:r,y:V-N}),y.add({x:i+N,y:V-N}),y.add({x:i+N,y:A+N}),y.add({x:_,y:A+N})),u(y,M)}),n("extend.west",function(D,L,U){var g=new T,E=D.s(k)+K(D,U),S=D.s(O),I=D._40I instanceof l.Edge,B=D._41I instanceof l.Edge,w=Q(U,D),o=w.x-(S||I?0:J(U,D._40I)/2),b=w.y,r=H(U,D),Z=r.x-(S||B?0:J(U,D._41I)/2),c=r.y,R=M(o,Z)-E;return b>c?(g.add({x:o,y:b+L}),g.add({x:R-L,y:b+L}),g.add({x:R-L,y:c-L}),g.add({x:Z,y:c-L})):(g.add({x:o,y:b-L}),g.add({x:R-L,y:b-L}),g.add({x:R-L,y:c+L}),g.add({x:Z,y:c+L})),u(g,D)}),n("extend.north",function(G,W,J){var F=new T,o=G.s(k)+K(G,J),V=G.s(O),m=G._40I instanceof l.Edge,C=G._41I instanceof l.Edge,j=Q(J,G),E=j.x,a=j.y-(V||m?0:Y(J,G._40I)/2),A=H(J,G),$=A.x,z=A.y-(V||C?0:Y(J,G._41I)/2),v=M(a,z)-o;return E>$?(F.add({y:a,x:E+W}),F.add({y:v-W,x:E+W}),F.add({y:v-W,x:$-W}),F.add({y:z,x:$-W})):(F.add({y:a,x:E-W}),F.add({y:v-W,x:E-W}),F.add({y:v-W,x:$+W}),F.add({y:z,x:$+W})),u(F,G)}),n("extend.south",function(D,j,y){var C=new T,G=D.s(k)+K(D,y),e=D.s(O),Z=D._40I instanceof l.Edge,z=D._41I instanceof l.Edge,i=Q(y,D),q=i.x,B=i.y+(e||Z?0:Y(y,D._40I)/2),U=H(y,D),b=U.x,t=U.y+(e||z?0:Y(y,D._41I)/2),F=m(B,t)+G;return q>b?(C.add({y:B,x:q+j}),C.add({y:F+j,x:q+j}),C.add({y:F+j,x:b-j}),C.add({y:t,x:b-j})):(C.add({y:B,x:q-j}),C.add({y:F+j,x:q-j}),C.add({y:F+j,x:b+j}),C.add({y:t,x:b+j})),u(C,D)});var v=function(f,a,y,n,w){if(n.sort(function(C,X){var K=C.getSourceAgent()===a?C.getTargetAgent():C.getSourceAgent(),U=X.getSourceAgent()===a?X.getTargetAgent():X.getSourceAgent(),N=K.p(),L=U.p();if(y===d||y===_){if(N.y>L.y)return 1;if(N.y<L.y)return-1}else{if(N.x>L.x)return 1;if(N.x<L.x)return-1}return h.sortFunc(C.getId(),X.getId())}),w){for(var o,L,P,V=f.getSourceAgent(),$=f.getTargetAgent(),e=0;e<n.size();e++){var Z=n.get(e);Z.getSourceAgent()===V&&Z.getTargetAgent()===$||Z.getTargetAgent()===V&&Z.getSourceAgent()===$?(L||(L=new T),L.add(Z,0)):L?(P||(P=new T),P.add(Z)):(o||(o=new T),o.add(Z))}n.clear(),o&&n.addAll(o),L&&n.addAll(L),P&&n.addAll(P)}var l=n.indexOf(f),N=n.size(),X=f.s(b);return{side:y,index:l,size:N,offset:-X*(N-1)/2+X*l}},p=function(B,P,r,t,E){var Z=P.s(y);return v(P,r,t,r.getAgentEdges().toList(function(O){return B.isVisible(O)&&O.s(y)===Z}),E)},f=function(n,k){var X=n.getSourceAgent()===k?n.getTargetAgent():n.getSourceAgent(),P=k.p(),e=X.p(),f=e.x-P.x,J=e.y-P.y;return f>0&&I(J)<=f?_:0>f&&I(J)<=-f?d:J>0&&I(f)<=J?i:q},B=function(d,s,Y){var B=s.s(y),u=f(s,Y);return v(s,Y,u,Y.getAgentEdges().toList(function(s){return d.isVisible(s)&&s.s(y)===B&&f(s,Y)===u}))},X=function(x,k){var D=x.getSourceAgent()===k,K=D?x.getTargetAgent():x.getSourceAgent(),U=k.p(),W=K.p();return D?U.y>W.y?q:i:U.x<W.x?_:d},W=function(d,L,A){var o=L.s(y),h=X(L,A);return v(L,A,h,A.getAgentEdges().toList(function(T){return d.isVisible(T)&&T.s(y)===o&&X(T,A)===h}),h===_||h===i)},G=function(x,W){var k=x.getSourceAgent()===W,E=k?x.getTargetAgent():x.getSourceAgent(),Z=W.p(),f=E.p();return k?Z.x<f.x?_:d:Z.y>f.y?q:i},w=function(H,I,d){var j=I.s(y),D=G(I,d);return v(I,d,D,d.getAgentEdges().toList(function(a){return H.isVisible(a)&&a.s(y)===j&&G(a,d)===D}),D===_||D===i)},r=function(c,t,v){var r=c.getSourceAgent(),X=c.getTargetAgent(),N=r.getId()>X.getId(),m=N?X:r,s=N?r:X,H=m.p(),L=s.p(),p=v(t,c,m),B=v(t,c,s),$=c.s(O),A=$?0:J(t,m)/2,x=$?0:J(t,s)/2,j=$?0:Y(t,m)/2,P=$?0:Y(t,s)/2,Q=p.offset,E=B.offset,W=p.side,I=B.side,w=new T;return W===q?(w.add({x:H.x+Q,y:H.y-j}),w.add({x:H.x+Q,y:L.y+E}),I===d?w.add({x:L.x-x,y:L.y+E}):w.add({x:L.x+x,y:L.y+E})):W===i?(w.add({x:H.x+Q,y:H.y+j}),w.add({x:H.x+Q,y:L.y+E}),I===d?w.add({x:L.x-x,y:L.y+E}):w.add({x:L.x+x,y:L.y+E})):W===d?(w.add({x:H.x-A,y:H.y+Q}),w.add({x:L.x+E,y:H.y+Q}),I===i?w.add({x:L.x+E,y:L.y+P}):w.add({x:L.x+E,y:L.y-P})):W===_&&(w.add({x:H.x+A,y:H.y+Q}),w.add({x:L.x+E,y:H.y+Q}),I===i?w.add({x:L.x+E,y:L.y+P}):w.add({x:L.x+E,y:L.y-P})),N&&w.reverse(),u(w,c)};n("ortho2",function(x,Z,D){var V,z,n=x.s(O),t=x.s("edge.ortho"),$=x.getSourceAgent(),e=x.getTargetAgent(),A=$.getId()>e.getId(),c=A?e:$,N=A?$:e,v=c.p(),H=N.p(),X=B(D,x,c),j=B(D,x,N),h=n?0:J(D,c)/2,W=n?0:Y(D,c)/2,g=n?0:J(D,N)/2,f=n?0:Y(D,N)/2,l=new T,k=X.offset,r=j.offset,w=X.side;return w===_?(V=H.y>v.y?-k:k,z=v.x+h+(H.x-g-v.x-h)*t,l.add({x:v.x+h,y:v.y+k}),l.add({x:z+V,y:v.y+k}),l.add({x:z+V,y:H.y+r}),l.add({x:H.x-g,y:H.y+r})):w===d?(V=H.y>v.y?-k:k,z=v.x-h-(v.x-h-H.x-g)*t,l.add({x:v.x-h,y:v.y+k}),l.add({x:z-V,y:v.y+k}),l.add({x:z-V,y:H.y+r}),l.add({x:H.x+g,y:H.y+r})):w===i?(V=H.x>v.x?-k:k,z=v.y+W+(H.y-f-v.y-W)*t,l.add({x:v.x+k,y:v.y+W}),l.add({x:v.x+k,y:z+V}),l.add({x:H.x+r,y:z+V}),l.add({x:H.x+r,y:H.y-f})):w===q&&(V=H.x>v.x?-k:k,z=v.y-W-(v.y-W-H.y-f)*t,l.add({x:v.x+k,y:v.y-W}),l.add({x:v.x+k,y:z-V}),l.add({x:H.x+r,y:z-V}),l.add({x:H.x+r,y:H.y+f})),A&&l.reverse(),u(l,x)},!0),n("flex2",function(x,o,l){var Q,I=x.getSourceAgent(),E=x.getTargetAgent(),c=I.getId()>E.getId(),A=c?E:I,s=c?I:E,P=A.p(),p=s.p(),L=B(l,x,A),X=B(l,x,s),k=x.s(O),t=x.s("edge.flex")+(L.size-1)/2*x.s(b),K=k?0:J(l,A)/2,W=k?0:Y(l,A)/2,j=k?0:J(l,s)/2,N=k?0:Y(l,s)/2,D=new T,Z=L.offset,y=X.offset,H=L.side;return H===_?(Q=p.y>P.y?-Z:Z,D.add({x:P.x+K,y:P.y+Z}),D.add({x:P.x+K+t+Q,y:P.y+Z}),D.add({x:p.x-j-t+Q,y:p.y+y}),D.add({x:p.x-j,y:p.y+y})):H===d?(Q=p.y>P.y?-Z:Z,D.add({x:P.x-K,y:P.y+Z}),D.add({x:P.x-K-t-Q,y:P.y+Z}),D.add({x:p.x+j+t-Q,y:p.y+y}),D.add({x:p.x+j,y:p.y+y})):H===i?(Q=p.x>P.x?-Z:Z,D.add({x:P.x+Z,y:P.y+W}),D.add({x:P.x+Z,y:P.y+W+t+Q}),D.add({x:p.x+y,y:p.y-N-t+Q}),D.add({x:p.x+y,y:p.y-N})):H===q&&(Q=p.x>P.x?-Z:Z,D.add({x:P.x+Z,y:P.y-W}),D.add({x:P.x+Z,y:P.y-W-t-Q}),D.add({x:p.x+y,y:p.y+N+t-Q}),D.add({x:p.x+y,y:p.y+N})),c&&D.reverse(),u(D,x)},!0),n("extend.north2",function(f,K,V){var Q=f.getSourceAgent(),D=f.getTargetAgent(),r=Q.getId()>D.getId(),N=r?D:Q,C=r?Q:D,o=N.p(),j=C.p(),i=p(V,f,N,q),y=p(V,f,C,q,!0),F=f.s(O),U=F?0:Y(V,N)/2,c=F?0:Y(V,C)/2,m=i.offset,d=y.offset,P=f.s(k)+(i.size-1)/2*f.s(b),B=M(o.y-U,j.y-c)-P+(o.x<j.x?m:-m),Z=new T;return Z.add({x:o.x+m,y:o.y-U}),Z.add({x:o.x+m,y:B}),Z.add({x:j.x+d,y:B}),Z.add({x:j.x+d,y:j.y-c}),r&&Z.reverse(),u(Z,f)},!0),n("extend.south2",function(A,r,y){var K=A.getSourceAgent(),j=A.getTargetAgent(),_=K.getId()>j.getId(),q=_?j:K,N=_?K:j,E=q.p(),F=N.p(),Q=p(y,A,q,i),x=p(y,A,N,i,!0),P=A.s(O),J=P?0:Y(y,q)/2,S=P?0:Y(y,N)/2,z=Q.offset,v=x.offset,t=A.s(k)+(Q.size-1)/2*A.s(b),I=m(E.y+J,F.y+S)+t+(E.x>F.x?z:-z),l=new T;return l.add({x:E.x+z,y:E.y+J}),l.add({x:E.x+z,y:I}),l.add({x:F.x+v,y:I}),l.add({x:F.x+v,y:F.y+S}),_&&l.reverse(),u(l,A)},!0),n("extend.west2",function(D,t,E){var Y=D.getSourceAgent(),V=D.getTargetAgent(),h=Y.getId()>V.getId(),e=h?V:Y,r=h?Y:V,U=e.p(),Z=r.p(),j=p(E,D,e,q),o=p(E,D,r,q,!0),m=D.s(O),l=m?0:J(E,e)/2,G=m?0:J(E,r)/2,X=j.offset,w=o.offset,L=D.s(k)+(j.size-1)/2*D.s(b),a=M(U.x-l,Z.x-G)-L+(U.y<Z.y?X:-X),$=new T;return $.add({x:U.x-l,y:U.y+X}),$.add({x:a,y:U.y+X}),$.add({x:a,y:Z.y+w}),$.add({x:Z.x-G,y:Z.y+w}),h&&$.reverse(),u($,D)},!0),n("extend.east2",function(f,I,z){var n=f.getSourceAgent(),M=f.getTargetAgent(),W=n.getId()>M.getId(),c=W?M:n,r=W?n:M,v=c.p(),C=r.p(),l=p(z,f,c,q),e=p(z,f,r,q,!0),L=f.s(O),g=L?0:J(z,c)/2,V=L?0:J(z,r)/2,E=l.offset,_=e.offset,Z=f.s(k)+(l.size-1)/2*f.s(b),d=m(v.x+g,C.x+V)+Z+(v.y>C.y?E:-E),H=new T;return H.add({x:v.x+g,y:v.y+E}),H.add({x:d,y:v.y+E}),H.add({x:d,y:C.y+_}),H.add({x:C.x+V,y:C.y+_}),W&&H.reverse(),u(H,f)},!0),n("v.h2",function($,O,e){return r($,e,W)},!0),n("h.v2",function(A,H,h){return r(A,h,w)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);