!function(R){"use strict";function I(B){var L,r,A,s,t,Q,g,d=[],R=0;L=G.createDiv(),L.style.overflow="hidden";var K=B.getView();K.insertBefore(L,B.getCanvas()),r=n.Default.createDiv(),r.style.WebkitTransformStyle="preserve-3d",r.style.MozTransformStyle="preserve-3d",r.style.transformStyle="preserve-3d",L.appendChild(r),[{event:"mousedown",style:"none"},{event:"mouseup",style:"auto"},{event:"touchstart",style:"none"},{event:"touchend",style:"auto"}].forEach(function(D){var M=D.style;V.addEventListener(K,D.event,function(){L.style.pointerEvents=M})}),this.updateWebView=function(){if(B.getWidth()&&B.getHeight()){var M=B.getCanvas(),T=1*M.style.width.slice(0,-2),I=1*M.style.height.slice(0,-2);(d[0]!==T||d[1]!==I)&&(d[0]=T,d[1]=I,L.style.width=T+"px",L.style.height=I+"px",r.style.width=T+"px",r.style.height=I+"px");var J=B._projectMatrix[5]*d[1]/2;J!==A&&(A=J,L.style.WebkitPerspective=A+"px",L.style.MozPerspective=A+"px",L.style.perspective=A+"px"),Q="translateZ("+A+"px)"+e(B._viewMatrix);var k=Q+"translate("+d[0]/2+"px,"+d[1]/2+"px)";s===k||t||(r.style.WebkitTransform=k,r.style.MozTransform=k,r.style.transform=k,s=k),R++,g=!1,B.dm().each(function(l){l.isWebView&&f(l)});for(var C,w=r.children,G=[],N=0,o=w.length;o>N;N++)C=w[N],C._isHtWebView&&C._renderCookie!==R&&G.push(C);G.length&&G.forEach(function(h){r.removeChild(h)})}};var Z=new Array(16),f=function(L){var H=L.getAttach();if(H){H.parentElement!==r&&r.appendChild(H),H._renderCookie=R,g=!0;var B=L.getFinalScale3d(),f=L._prefrenceSize;f&&f[0]?f[1]||(f[1]=f[0]/B[0]*B[1]):f=[B[0],B[1]],H.style.width=f[0]+"px",H.style.height=f[1]+"px";var y=1/f[0],N=1/f[1],Y=1,T=L.mat;Z[0]=T[0]*y,Z[1]=T[1]*y,Z[2]=T[2]*y,Z[3]=T[3]*y,Z[4]=T[4]*N,Z[5]=T[5]*N,Z[6]=T[6]*N,Z[7]=T[7]*N,Z[8]=T[8]*Y,Z[9]=T[9]*Y,Z[10]=T[10]*Y,Z[11]=T[11]*Y,Z[12]=T[12],Z[13]=T[13],Z[14]=T[14],Z[15]=T[15];var U=o(Z,t?"translate("+d[0]/2+"px,"+d[1]/2+"px)"+Q:""),m=H.$a2;m!==U&&(H.$a2=U,H.style.WebkitTransform=U,H.style.MozTransform=U,H.style.transform=U)}}}function s(Q){return Math.abs(Q)<1e-10?0:Q}function e(m){var x=m;return"matrix3d("+s(x[0])+","+s(-x[1])+","+s(x[2])+","+s(x[3])+","+s(x[4])+","+s(-x[5])+","+s(x[6])+","+s(x[7])+","+s(x[8])+","+s(-x[9])+","+s(x[10])+","+s(x[11])+","+s(x[12])+","+s(-x[13])+","+s(x[14])+","+s(x[15])+")"}function o(L,W){var X=L,R="matrix3d("+s(X[0])+","+s(X[1])+","+s(X[2])+","+s(X[3])+","+s(-X[4])+","+s(-X[5])+","+s(-X[6])+","+s(-X[7])+","+s(X[8])+","+s(X[9])+","+s(X[10])+","+s(X[11])+","+s(X[12])+","+s(X[13])+","+s(X[14])+","+s(X[15])+")";return"translate(-50%,-50%)"+(W||"")+R}var f="ht",n=R[f],G=n.Default,V=G.getInternal(),S=V.superCall,w=n.graph3d.Graph3dView,H=w.prototype.validateImpl;w.prototype.validateImpl=function(){H.call(this);var T=this._webViewRenderer;T||(T=this._webViewRenderer=new I(this)),T.updateWebView()};var c=n.WebView3d=function(){var p=this;S(c,p),p.s({shape3d:"billboard","shape3d.reverse.flip":!0})},T=[1,1,1,1],j=[0,0,0,0];G.def(f+"."+"WebView3d",n.Node,{ms_ac:["attach"],isWebView:!0,attachDOM:function(N,y,w){if(!N)return this.detachDOM();if("string"==typeof N){var B=document.createElement("iframe");B.src=N,N=B}var l=N.style;l.position="absolute",l.border=0,l.outline=0,l.padding=0,l.margin=0,N._isHtWebView=!0,this.setAttach(N),this._prefrenceSize=[y,w],this.s("shape3d.blend",j)},detachDOM:function(){this.setAttach(null),this.s("shape3d.blend",this.getBgColor())},setBgColor:function(y){this.a("defaultBgColor",y),this.getAttach()||this.s("shape3d.blend",y)},getBgColor:function(){return this.a("defaultBgColor")||T}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);