!function(S,A,W){"use strict";var G="px",H="0",z="innerHTML",_="className",t=ht.Default,K=ht.Color,E=ht.Node,c="position",m="top",Z="left",a=t.animate,C=t.getInternal(),y="width",H="0",T="none",h="max-height",O="font",J="background",D="border-box",B="user-select",Y="box-sizing",f="overflow",X=t.isTouchable,C=t.getInternal(),k=K.titleIconBackground,l=t.scrollBarInteractiveSize,x=/msie 9/.test(S.navigator?S.navigator.userAgent.toLowerCase():""),Q=null,v=function(){return document},p=function(s){return v().createElement(s)},n=function(){return p("div")},$=function(){var w=n(),t=w.style;return t.msTouchAction=T,t.cursor="default",X&&t.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",Q),t.position="absolute",t.left=H,t.top=H,w},R=function(){return p("canvas")},e=function(){return document.body},M=function(w,d,P){w.style.setProperty(d,P,Q)},r=function(f,s){f.style.removeProperty(s)},P=function(k,g,E){t.def(ht.widget[k],g,E)},d=function(l,s){l.appendChild(s)},g=function(m,c){m.removeChild(c)},w=C.addEventListener;C.removeEventListener,C.addMethod(t,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:k,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:k}]},paletteTitleLabelColor:t.labelSelectColor,paletteTitleLabelFont:t.labelFont,paletteContentLabelFont:t.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:t.widgetTitleHeight,paletteTitleBackground:K.titleBackground,paletteTitleHoverBackground:K.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:W,paletteItemHoverBorderColor:K.highlight,paletteItemSelectBackground:K.highlight},!0);var s=".palette-item:hover{border: 1px solid "+t.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+t.paletteTitleHoverBackground+" !important}",L=document.createElement("style");X||(L.styleSheet?L.styleSheet.cssText=s:L.appendChild(v().createTextNode(s))),v().getElementsByTagName("head")[0].appendChild(L);var o=function(p){var D=this;D.$22h=p,D.addListeners()};t.def(o,A,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var J=this;J.$36h&&e().removeChild(J.$36h),J.$23h=J.$24h=J.$25h=J.$35h=J.$36h=Q},handle_touchstart:function(n){for(var b,s=this,u=s.$22h,G=n.target,Z=u.sm(),e=u.dm(),N="palette-header",d="palette-header-tool",A="palette-item",q=!1,F=!1,f=!1;G&&(G[_]||"").indexOf(N)<0&&(G[_]||"").indexOf(A)<0;)G=G.parentNode;if(G&&G[_].indexOf(d)>=0?q=!0:G&&G[_].indexOf(N)>=0?f=!0:G&&G[_].indexOf(A)>=0&&(F=!0),t.isLeftButton(n))if(s.$27h(n))s.$24h=t.getClientPoint(n),s.$25h=u.ty();else if(q){t.preventDefault(n),b=G.parentNode.$11h;var H=e.getDataById(b),K=H.s("tools")[G.toolIndex];K.action&&K.action.call(u)}else if(f){t.preventDefault(n),b=G.$11h;var H=e.getDataById(b);H.isExpanded()?H.setExpanded(!1):H.setExpanded(!0)}else if(F){b=G.$11h;var g=e.getDataById(b);Z.ss(g),u.handleDragAndDrop&&(t.preventDefault(n),g.s("draggable")&&(u.handleDragAndDrop(n,"prepare"),s.$35h=0)),g.s("draggable")||(t.preventDefault(n),s.$24h=t.getClientPoint(n),s.$25h=u.ty())}else t.preventDefault(n),s.$24h=t.getClientPoint(n),s.$25h=u.ty();else s.$26h(n)},handle_mousedown:function(q){this.handle_touchstart(q)},handle_mousewheel:function(G){this.handleScroll(G,G.wheelDelta/40,G.wheelDelta!==G.wheelDeltaX)},handle_DOMMouseScroll:function(i){this.handleScroll(i,-i.detail,1)},handleScroll:function(i,U,C){var I=this.$22h;t.preventDefault(i),C&&I._41o()&&I.ty(I.ty()+20*U)},handle_mouseup:function(I){this.handle_touchend(I)},handle_touchend:function(d){var a=this;a.$37h(d),a.$26h(d)},handleWindowMouseUp:function(E){this.handleWindowTouchEnd(E)},handleWindowTouchEnd:function(a){var k=this;k.$37h(a),k.$26h(a)},$37h:function(M){var D=this,l=D.$22h;2===D.$35h&&(D.$35h=3,l.handleDragAndDrop(M,"end"))},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function(r){var e=this,o=e.$22h,w=e.$23h,F=e.$24h,B=e.$25h,N=t.getClientPoint(r),C=o._29I,V=e.$36h;if(1===e.$35h||2===e.$35h){if(e.$35h=2,o.handleDragAndDrop(r,"between"),X){var Q=r.touches[0];r=Q?Q:r.changedTouches[0]}V.style.left=r.pageX-parseInt(V.width)/2+G,V.style.top=r.pageY-parseInt(V.height)/2+G}else"p"===w?o.ty(B+N.y-F.y):"v"===w&&o.ty(B+(F.y-N.y)/C.height*o._59I)},handle_mousemove:function(E){this.handle_touchmove(E)},handle_touchmove:function(g){if(!t.isDragging()&&t.isLeftButton(g)){var S=this,n=S.$22h,L=S.$27h(g);if(S.$24h){if(!S.$23h){if(t.getDistance(t.getClientPoint(g),S.$24h)<2)return;S.$23h=L?"v":"p",t.startDragging(S)}}else if(L)n._43o();else if(0===S.$35h){if(S.$35h=1,n.handleDragAndDrop(g,"begin"),X){var Z=g.touches[0];g=Z?Z:g.changedTouches[0]}var u=S.$36h=new Image,x=n.$10h[n.sm().ld().getId()].querySelector(".image-box"),a=parseInt(x.style.width),b=parseInt(x.style.height);u.draggable=!1,u.src=x.toDataURL(),u.width=a,u.height=b,u.style.position="absolute",u.style.left=g.pageX-a/2+G,u.style.top=g.pageY-b/2+G,e().appendChild(u),t.startDragging(S)}}},$27h:function(V){var X=this.$22h,O=X.getView(),s=O.getBoundingClientRect(),Y=X._29I,r=V.clientX-s.left+O.scrollLeft;return X._41o()&&Y.x+Y.width-r<l}}),ht.widget.Palette=function(v){var E=this,i=E._view=C.createView(null,E);E.$9h={},E.$10h={},E.$4h={},E._29I={x:0,y:0,width:0,height:0},E._59I=0,E.dm(v?v:new ht.DataModel),i[_]="ht-widget-palette",E.$29h=new o(E),M(i,J,t.paletteContentBackground),M(i,f,"auto"),M(i,Y,D),M(i,"-moz-"+Y,D),M(i,"-webkit-"+B,T),M(i,"-moz-"+B,T),M(i,"-ms-"+B,T),M(i,B,T),M(i,"position","absolute"),M(i,"overflow","hidden"),d(i,E._79O=$()),w(i,"dragstart",function(J){J.dataTransfer&&(J.dataTransfer.setData("Text","nodeid:"+J.target.$11h),J.dataTransfer.effectAllowed="all",E.$29h.$26h())})},P("Palette",A,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:t.autoHideScrollBar,_scrollBarSize:t.scrollBarSize,_scrollBarColor:t.scrollBarColor,getViewRect:function(){return this._29I},ty:function(c){return c==Q?this.getTranslateY():(this.setTranslateY(c),void 0)},setTranslateY:function(b){if(this.$32h==Q){var U=this,G=U.$33h(b),$=U.$30h;U.$30h=G,U.fp("translateY",$,G)}},getTranslateY:function(){return this.$30h},setLayout:function(p){var R,S,q=this,y=q._layout;q._layout=p,"smallicons"===p?R=S=20:"iconsonly"===p?R=S=50:(R=70,S=50),q.setItemImageWidth(R),q.setItemImageHeight(S),q.setItemImagePadding(4),q.fp("layout",y,p)},getDataAt:function(Y){for(var G=Y.target;G&&G.$11h==Q;)G=G.parentNode;return G&&G.$11h!=Q?this.getDataModel().getDataById(G.$11h):void 0},$20h:function(){var e=16;return X&&(e*=1.2),e},$19h:function(){return t.paletteTitleHeight},$18h:function(){var X=t.paletteSeparatorWidth,L=t.paletteTitleBackground,S=t.paletteSeparatorColor||t.brighter(L);return X+G+" solid "+S},$17h:function(u){M(u,"cursor","pointer"),M(u,"display","inline-block"),M(u,"margin-right",(X?8:4)+G),M(u,"vertical-align",m)},$1h:function(Q){var b=this,V=n(),$=n(),K=p("span");V[_]="palette-header",M(V,c,"relative"),M(V,J,t.paletteTitleBackground),M(V,"color",t.paletteTitleLabelColor),M(V,m,H),M(V,Y,D),M(V,"-moz-"+Y,D),M(V,"padding","0 5px 0 0"),M(V,"border-top",b.$18h()),M(V,y,"100%"),M(V,"cursor","pointer"),M(V,"white-space","nowrap"),M(V,f,"hidden"),M(V,O,t.paletteTitleLabelFont),M(V,"line-height",b.$19h()+G),V.$11h=Q.getId();var k=R(),F=b.$19h(),E=b.$20h();b.$17h(k),C.setCanvas(k,E,F),d(V,k);var h=Q.s("tools");if(h)for(var o=0;o<h.length;o++){var W=R();b.$17h(W),C.setCanvas(W,E,F),W[_]="palette-header-tool palette-header-tool"+Q.getId()+"-"+o,W.style.position="absolute",W.style.right=(E+10)*o+"px",W.toolIndex=o,d(V,W)}return k[_]="palette-toggle-icon-"+Q.getId(),$[_]="palette-content",M($,"max-height",0+G),M($,O,t.paletteContentLabelFont),M($,f,"hidden"),$.$11h=Q.getId(),b.$9h[Q.getId()]=$,K[z]=Q.getName(),M(K,O,t.paletteTitleLabelFont),d(V,k),d(V,K),[V,$]},$2h:function(Q){var $=this,j=$._layout,N=x&&Q.s("draggable")?p("a"):n(),U=R(),l=n(),X=Q.getName()||"",A=Q.s("title")||Q.getToolTip()||X,L=$._itemMargin;U[_]="image-box";var c=$.getItemImageWidth(),P=$.getItemImageHeight();return C.setCanvas(U,c,P),d(N,U),l[z]=X,l[_]="label-box","iconsonly"!==j&&d(N,l),N[_]="palette-item",M(N,"vertical-align",m),M(N,"cursor","pointer"),M(N,"border-radius",5+G),M(N,"border","1px solid transparent"),M(N,"text-align","center"),M(N,"display","inline-block"),M(N,"margin-left",L+G),M(N,"margin-top",L+G),M(N,"color",t.paletteContentLabelColor),"smallicons"===j?(M(U,"vertical-align","middle"),M(N,"margin-left",2+G),M(N,"margin-top",2+G),M(N,"padding",2+G),M(N,"text-align",Z),M(l,"display","inline-block"),M(l,"min-width",$.$21h+$._itemMargin+G)):"largeicons"===j&&(M(l,"max-width",c+G),M(l,"overflow","hidden")),N.$11h=Q.getId(),A&&(N.title=A),Q.s("draggable")&&!$.handleDragAndDrop&&(x?(N.href="#",M(N,"text-decoration",T)):N.draggable="true"),N},$16h:function(b,q,y,B){var L=C.initContext(b);C.translateAndScale(L,0,0,1),L.clearRect(0,0,y,y);var k=(y-B)/2;t.drawStretchImage(L,t.getImage(q),"fill",0,k,B,B),L.restore()},$15h:function(c){var s=this,g=c.getId(),Q=s._view.querySelector(".palette-toggle-icon-"+g),D=c.isExpanded()?t.paletteCollapseIcon:t.paletteExpandIcon;if(Q&&D){var T=s.$19h(),$=s.$20h();s.$16h(Q,D,T,$)}},_drawToolsIcon:function(W){var g=this,c=W.s("tools");if(c)for(var v=0;v<c.length;v++){var y=g._view.querySelector(".palette-header-tool"+W.getId()+"-"+v),S=c[v].icon,I=g.$19h(),p=g.$20h();g.$16h(y,S,I,p)}},$14h:function(U){var V=this,_=U.getId(),e=V.$10h[_].querySelector(".image-box"),E=U.getImage(),N=U.s("image.stretch");if(e&&E){var L=C.initContext(e),b=V.getItemImagePadding();b="smallicons"===V._layout?b/2:b;var D=V.getItemImageWidth()-2*b,P=V.getItemImageHeight()-2*b;C.translateAndScale(L,0,0,1),L.clearRect(0,0,D,P),t.drawStretchImage(L,t.getImage(E),N,b,b,D,P,U,V,V.getBodyColor(U)),L.restore()}},validateImpl:function(){var w,A,l,s=this,o=s.$9h,J=s._layout,W=s.$10h,T=s.$4h,n=s._view,i=s.dm();if(s.$13h&&(delete s.$13h,T={},i.each(function(P){T[P.getId()]=P})),"smallicons"===J)for(var r in T){var C=T[r];if(C instanceof E){var D=C.getName()||"",Z=t.getTextSize(t.paletteContentLabelFont,D).width;s.$21h!=Q&&s.$21h>Z||(s.$21h=Z)}}for(var r in T){l=T[r];var m,e;if(i.contains(l)){if(l instanceof ht.Group){var b,c=s.$1h(l),N=W[l.getId()];N&&(b=N.nextSibling,g(n,b),g(n,N)),A=i.getSiblings(l).indexOf(l);var B=n.children[2*A]||s._79O;B&&B.parentNode?(n.insertBefore(c[0],B),n.insertBefore(b||c[1],B)):(n.appendChild(c[0]),n.appendChild(b||c[1])),W[l.getId()]=c[0],w=o[l.getId()]=b||c[1],e=l.$12h;var k=l.s("promptText");e||(l.$12h=p("div"),l.$12h[z]=k||"",e=l.$12h),0===l.getChildren().size()?w.contains(e)||d(w,e):w.contains(e)&&g(w,e)}else if(m=l.getParent()){var L=s.$2h(l),O=W[l.getId()];w=o[m.getId()],O&&g(O.parentNode,O),A=i.getSiblings(l).indexOf(l);var R=w.children[A];R?w.insertBefore(L,R):d(w,L),W[l.getId()]=L,s.$14h(l)}}else{var j=W[l.getId()],F=j.parentNode;if(l instanceof ht.Group){var V=j.nextSibling;g(n,j),g(n,V),delete o[l.getId()]}else g(F,j),0===F.children.length&&(m=i.getDataById(F.$11h),m&&(e=m.$12h,e&&!F.contains(e)&&d(F,e)));delete W[l.getId()]}}s.$4h={};var y=function(){var S=s._59I,u=0;s.$32h!=Q&&(clearInterval(s.$32h),u=0,delete s.$32h),s.$32h=setInterval(function(){s.$31h(),S===s._59I?(u++,u>=2&&(clearInterval(s.$32h),delete s.$32h)):(u=0,S=s._59I)},30)};for(var v in o)if(w=o[v],l=i.getDataById(o[v].$11h),s.$15h(l),s._drawToolsIcon(l),l.isExpanded()){if(w.style.maxHeight===0+G){var q=w.scrollHeight+s._itemMargin+G;a(w).duration(200).set(h,q).set("padding-bottom",s._itemMargin+G).end(function(){return function(){y()}}(q))}else w.style.maxHeight=w.scrollHeight+G;w.style.paddingBottom=s._itemMargin+G}else w.style.maxHeight!==0+G&&a(w).duration(200).set(h,H).set("padding-bottom",H).end(function(){return function(){y()}}(w));s.$28h(),s.$31h()},$31h:function(){for(var Q=this,b=Q._view,l=0,A=b.children,E=0;E<A.length;E++){var x=A[E];x.className&&x.className.indexOf("palette-")>=0&&(l+=x.offsetHeight)}Q._59I=l,Q.$30h=Q.$33h(Q.ty());var P=Q.ty();b.scrollTop=-P,Q._29I={x:0,y:-P,width:b.clientWidth,height:b.clientHeight},M(Q._79O,m,-P+G),Q._93I()},$33h:function(m){var S=this,g=S._29I.height-S._59I;return g>m&&(m=g),m>0?0:Math.round(m)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(V){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(V.property)<0&&this.redraw(),"translateY"===V.property&&(this.iv(),this._43o())},findDataByName:function(s){for(var a=this.dm().getDatas(),E=0;E<a.size();E++){var f=a.get(E);if(f.getName()===s)return f}},setDataModel:function(i){var O=this,b=O._dataModel,n=O._selectionModel;b!==i&&(b&&(b.umm(O.$6h,O),b.umd(O.$8h,O),b.umh(O.$7h,O),n||b.sm().ums(O.$28h,O)),O._dataModel=i,i.mm(O.$6h,O),i.md(O.$8h,O),i.mh(O.$7h,O),n?n._21I(i):i.sm().ms(O.$28h,O),O.sm().setSelectionMode("single"),O.fp("dataModel",b,i))},$6h:function(T){var m=this,i=m._view,e=T.data,l=m.$4h;"add"===T.kind?l[e.getId()]=e:"remove"===T.kind?l[e.getId()]=e:"clear"===T.kind&&(m.$10h={},m.$9h={},m.$4h={},i[z]=""),m.iv()},$7h:function(q){var $=this,A=q.data;$.$4h[A.getId()]=A,$.iv()},$8h:function(x){var m=this,u=x.data,i=x.property;"expanded"===i?m.iv():(m.$4h[u.getId()]=u,m.iv())},$28h:function(){var u,c=this,h=c.sm(),T="palette-item",f=h.ld();this.dm().each(function(j){u=c.$10h[j.getId()],u&&u[_].indexOf(T)>=0&&(j===f?M(u,J,t.paletteItemSelectBackground):r(u,J))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);