!function(J,g){"use strict";var P="ht",T=J[P],H="innerHTML",Q="className",n=null,z="px",i=T.Default,e=i.getInternal(),k="0",E=function(){return document},h=function(A){return E().createElement(A)},p=function(){return h("canvas")},C=function(r,j,S){r.style.setProperty(j,S,n)},$=function(L,r,B){i.def(T.widget[L],r,B)},R=function(G,a){G.appendChild(a)},W=function(R,D){R.removeChild(D)},w=e.addEventListener,t=e.removeEventListener,B=i.isTouchable;e.addMethod(i,{menuLabelFont:(B?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),T.widget.Menu=function(D){var $=this,u=$._view=e.createView(null,$),B=$.$1g=new T.widget.ContextMenu,O=h("ul");B._r=!0,B._view[Q]+=" ht-widget-dropdownmenu",u[Q]="ht-widget-menu",O[Q]="header",C(u,"margin",k),C(u,"padding",k),C(u,"background",i.menuBackground),C(u,"-webkit-user-select","none"),C(u,"-moz-user-select","none"),C(u,"user-select","none"),C(u,"text-align","left"),C(u,"border-bottom",i.menuSeparatorWidth+"px solid "+i.menuSeparatorColor),C(u,"cursor","default"),C(u,"overflow","auto"),C(u,"white-space","nowrap"),C(u,"font",i.menuLabelFont),C(u,"color",i.menuLabelColor),C(u,"box-sizing","border-box"),C(u,"-moz-box-sizing","border-box"),C(O,"list-style","none"),C(O,"margin",k),C(O,"padding",k),C(O,"display","inline-block"),R(u,O),$.setItems(D),$.$2g=function(q){$.$3g(q)},$.$4g=function(l){$.$5g(l)},$.$6g=function(N){$.$7g(N)},$.$8g=function(w){$.$9g(w)},$.$9b=function(x){$.$10g(x)},$._autoShow=!0,$.setAutoShow(!1),B.afterHide=function(){$.$11g()},B.afterShow=function(){$.$12g()},t(E(),"keydown",B.$3b),$.$3b=function(K){$.$13g(K)},$.invalidate()},$("Menu",g,{_items:n,$14g:i.menuHoverBackground,$15g:i.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(G){var y=this;if(y.$21g=G,y.setItems(y._items),"largeicons"===G){for(var c=y._view.querySelectorAll(".header-item"),f=0,o=0;o<c.length;o++){var k=c[o];f=Math.max(f,k.clientWidth)}for(var o=0;o<c.length;o++){var k=c[o];C(k,"min-width",f+z)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(q){this.$22g=q;for(var G=this._view.querySelectorAll(".header-item"),M=0;M<G.length;M++){var u=G[M];C(u,"margin-left",q+z),C(u,"margin-right",q+z)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(Q){this.$23g=Q;for(var X=this._view.querySelectorAll(".header-item"),b=0;b<X.length;b++){var Y=X[b];C(Y,"margin-top",Q+z),C(Y,"margin-bottom",Q+z)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(J){this.$24g=J,C(this._view,"text-align",J)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var W=this,S=W._enableGlobalKey;S===!1&&(w(E(),"keydown",W.$3b),W._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,t(E(),"keydown",this.$3b)},setHoverBackground:function(f){this.$14g=f},setHoverColor:function(Y){this.$15g=Y},setItems:function(M){var B=this,q=B._view,L=B.$21g;if(B._items=M,q.children[0][H]="",B.$16g={},M&&M.length){for(var G=q.children[0],c=0,X=E().createDocumentFragment();c<M.length;c++){var l=M[c],U=h("li"),I=h("span");if(l.icon){var D=p();D[Q]="menu-item-icon","smallicons"===L?(C(D,"height","1.2em"),C(D,"width","1.2em"),C(D,"vertical-align","middle")):(C(D,"height","32px"),C(D,"width","32px"),C(D,"display","block"),C(D,"margin","0 auto")),D.$20g=l.icon,R(U,D)}U[Q]="header-item",C(U,"display","inline-block"),C(U,"vertical-align","top"),C(U,"padding","0 1.2em"),C(U,"line-height","1.8em"),"largeicons"===L&&C(U,"text-align","center"),C(U,"background-color","rgba(0,0,0,0)"),U.setAttribute("data-index",c),B.$16g[c]=l.items,I[H]=l.label,"iconsonly"!==L&&R(U,I),R(X,U)}R(G,X)}},showDropdownMenu:function(M){var b=this,R=b.$16g[M],A=b.$1g,B=b._view.children[0].children[M],O=b.$17g;if(B&&B!==O){O&&b.hideDropdownMenu();var k=B.getBoundingClientRect(),n=i.getWindowInfo();b.$17g=B,A.setItems(R),A.show(k.left+n.left,k.top+k.height+n.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(I,T){var m=this,h=m._items;return h&&0!==h.length?m.$1g.getItemByProperty(I,T,h):n},$12g:function(){var t=this,K=t.$17g;K.style.background=t.$14g,K.style.color=t.$15g,t._autoShow||w(E(),B?"touchstart":"mousedown",t.$9b)},$11g:function(){var C=this,z=C.$17g;z&&(z.style.background="",z.style.color="",C.$17g=n),t(E(),B?"touchstart":"mousedown",C.$9b)},$10g:function(I){var p=this,S=p._view,o=p.$1g,A=S.children[0];!E().body.contains(S)||A.contains(I.target)||o._view.contains(I.target)||p.hideDropdownMenu()},$13g:function(o){var l=this,s=l.$1g;E().body.contains(l._view)&&s.$13b.$4b.call(s.$13b,o,l._items)},setAutoShow:function(H){var U=this,Y=U.$1g,s=U._view;U._autoShow!==H&&(U._autoShow?(t(s,"mouseover",U.$2g),t(s,"mouseout",U.$4g),t(Y._view,"mouseout",U.$4g),B||(w(s,"mouseover",U.$8g),w(s,"mouseout",U.$8g)),w(s,B?"touchstart":"mousedown",U.$6g)):(t(s,"mouseover",U.$8g),t(s,"mouseout",U.$8g),t(s,B?"touchstart":"mousedown",U.$6g),t(E(),B?"touchstart":"mousedown",U.$9b),B||(w(s,"mouseover",U.$2g),w(s,"mouseout",U.$4g),w(Y._view,"mouseout",U.$4g))),U._autoShow=H)},$3g:function(g){var Z=this,M=Z._view.children[0],A=g.target;if(M!==A&&M.contains(A)){for(;"header-item"!==A[Q];)A=A.parentNode;Z.showDropdownMenu(A.getAttribute("data-index"))}},$5g:function(d){var c=this,R=c._view.children[0],K=c.$1g,U=d.target,b=d.relatedTarget;!R.contains(U)&&!K._view.contains(U)||R.contains(b)||K._view.contains(b)||c.hideDropdownMenu()},$7g:function(u){u.preventDefault();var F=this,h=F._view.children[0],e=F.$1g,X=u.target;if(i.isLeftButton(u)&&h!==X&&h.contains(X))if(B){for(;"header-item"!==X[Q];)X=X.parentNode;var z=X.getAttribute("data-index"),e=F.$1g,x=F._view.children[0].children[z],v=F.$17g;e.isShowing()&&F.hideDropdownMenu(),x!==v&&F.showDropdownMenu(z)}else if(e.isShowing())F.hideDropdownMenu();else{for(;"header-item"!==X[Q];)X=X.parentNode;F.showDropdownMenu(X.getAttribute("data-index"))}},$9g:function(C){var h=this,A=h._view,P=h.$1g,O=C.target;if(A.contains(O)){for(var B=A.querySelectorAll(".header-item"),M=n,r=0;r<B.length;r++){var R=B[r];R.style.background="",R.style.color="","mouseover"===C.type?R.contains(O)&&(M=R):"mouseout"===C.type&&P.isShowing()&&h.$17g===R&&(M=R)}P.isShowing()&&(M||(M=h.$17g),h.showDropdownMenu(M.getAttribute("data-index"))),M&&(M.style.background=h.$14g,M.style.color=h.$15g)}},getShowingMenuIndex:function(){var l=this.$17g;return l?l.getAttribute("data-index"):-1},addTo:function(v){var M=this,B=M._view;R(v,B),M.invalidate()},dispose:function(){var Z=this,x=Z._view,h=Z.$1g;x&&(Z._autoShow?(t(x,"mouseover",Z.$2g),t(x,"mouseout",Z.$4g),t(h._view,"mouseout",Z.$4g)):(t(x,"mouseover",Z.$8g),t(x,"mouseout",Z.$8g),t(x,B?"touchstart":"mousedown",Z.$6g),t(E(),B?"touchstart":"mousedown",Z.$9b)),t(E(),"keydown",Z.$3b),h.dispose(),x.parentNode&&W(x.parentNode,x),Z._view=Z.$1g=Z.$16g=Z._items=Z.$17g=Z.$2g=Z.$4g=Z.$6g=Z.$8g=Z.$9b=Z.$3b=n)},$19g:function(h,B,N,s){var g=e.initContext(h);e.translateAndScale(g,0,0,1),g.clearRect(0,0,N,s),i.drawStretchImage(g,i.getImage(B),"fill",0,0,N,s),g.restore()},validateImpl:function(){var o,D,n,B=this,V=B._view,E=V.querySelectorAll(".menu-item-icon");for(n=0;n<E.length;n++){var C=E[n];o=C.clientWidth,D=C.clientHeight,o&&D&&(e.setCanvas(C,o,D),B.$19g(C,i.getImage(C.$20g),o,D))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);